<!DOCTYPE html>

<html lang="it" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>8.2. Endpoint del Credential Issuer &#8212; IT-Wallet Technical Documentation - Release 1.0 - 1.0.0</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/basic_mod.css?v=9b2032db" />
    <link rel="stylesheet" type="text/css" href="_static/itwallet-override.css?v=63798874" />
    <script src="_static/documentation_options.js?v=3fd72285"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/translations.js?v=da26b4cc"></script>
    <script src="_static/js/theme.js"></script>
    <script src="_static/js/petite-vue.js"></script>
    <link rel="icon" href="https://avatars.githubusercontent.com/u/15377824?s=48&amp;v=4"/>
    <link rel="index" title="Indice" href="genindex.html" />
    <link rel="search" title="Cerca" href="search.html" />
    <link rel="next" title="8.3. Endpoint della Relying Party" href="relying-party-endpoint.html" />
    <link rel="prev" title="8.1. Endpoint del Fornitore di Wallet" href="wallet-provider-endpoint.html" /> 
  </head><body data-dark_mode_code_blocks="true">

<div id="top_nav">
    

    <nav>
        
            
        

        <p id="toggle_sidebar">
            <a href="#" title="Toggle sidebar">|||</a>
        </p>
        <h1><a href="index.html" title="Go to homepage">IT-Wallet Technical Documentation - Release 1.0 - 1.0.0</a></h1>
            <a id="source_link" href="https://github.com/italia/eudi-wallet-it-docs">
    
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">
            <path fill="white" d="M 244.8,8 C 106.1,8 0,113.3 0,252 c 0,110.9 69.8,205.8 169.5,239.2 12.8,2.3 17.3,-5.6 17.3,-12.1 0,-6.2 -0.3,-40.4 -0.3,-61.4 0,0 -70,15 -84.7,-29.8 0,0 -11.4,-29.1 -27.8,-36.6 0,0 -22.9,-15.7 1.6,-15.4 0,0 24.9,2 38.6,25.8 21.9,38.6 58.6,27.5 72.9,20.9 2.3,-16 8.8,-27.1 16,-33.7 -55.9,-6.2 -112.3,-14.3 -112.3,-110.5 0,-27.5 7.6,-41.3 23.6,-58.9 -2.6,-6.5 -11.1,-33.3 2.6,-67.9 20.9,-6.5 69,27 69,27 20,-5.6 41.5,-8.5 62.8,-8.5 21.3,0 42.8,2.9 62.8,8.5 0,0 48.1,-33.6 69,-27 13.7,34.7 5.2,61.4 2.6,67.9 16,17.7 25.8,31.5 25.8,58.9 0,96.5 -58.9,104.2 -114.8,110.5 9.2,7.9 17,22.9 17,46.4 0,33.7 -0.3,75.4 -0.3,83.6 0,6.5 4.6,14.4 17.3,12.1 C 428.2,457.8 496,362.9 496,252 496,113.3 383.5,8 244.8,8 Z"/>
        </svg>
    
</a>
        

        <a id="mode_toggle" href="#" @click.prevent="handleClick" :title="mode">
    <template v-if="mode == 'light'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_light"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M67.48,18.073c1.913,-1.912 1.913,-5.018 0,-6.931c-1.912,-1.912 -5.018,-1.912 -6.931,0l-6.798,6.799c-1.912,1.912 -1.912,5.018 0,6.931c1.913,1.912 5.018,1.912 6.931,-0l6.798,-6.799Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.728,61.108c1.912,-1.913 1.912,-5.018 -0,-6.931c-1.913,-1.913 -5.019,-1.913 -6.931,-0l-6.799,6.798c-1.912,1.913 -1.912,5.019 0,6.931c1.913,1.913 5.019,1.913 6.931,0l6.799,-6.798Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.682,54.177c-1.913,-1.913 -5.018,-1.913 -6.931,-0c-1.912,1.913 -1.912,5.018 0,6.931l6.798,6.798c1.913,1.913 5.019,1.913 6.931,0c1.913,-1.912 1.913,-5.018 0,-6.931l-6.798,-6.798Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M4.901,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,-0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M18.929,11.142c-1.912,-1.912 -5.018,-1.912 -6.931,0c-1.912,1.913 -1.912,5.019 0,6.931l6.799,6.799c1.912,1.912 5.018,1.912 6.931,-0c1.912,-1.913 1.912,-5.019 -0,-6.931l-6.799,-6.799Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.108,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c-0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c-0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'dark'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_dark"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.901,2.196 -4.901,4.901c0,2.705 2.197,4.901 4.901,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.662,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.989,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.732,61.103c1.91,-1.91 1.91,-5.011 0,-6.921l-0.009,-0.01c-1.91,-1.91 -5.012,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.909,1.91 5.011,1.91 6.92,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.672,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.52,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l-0,-0.01c-0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.901,2.196 -4.901,4.901c0,2.704 2.197,4.9 4.901,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.73,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 -0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.098,34.623c-2.699,0 -4.891,2.192 -4.891,4.892l-0,0.019c-0,2.699 2.192,4.891 4.891,4.891c2.7,0 4.892,-2.192 4.892,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.892,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'darkest'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_darkest"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><path d="M39.315,23.791c8.684,-0 15.734,7.05 15.734,15.733c0,8.684 -7.05,15.734 -15.734,15.734c-8.683,0 -15.733,-7.05 -15.733,-15.734c-0,-8.683 7.05,-15.733 15.733,-15.733Zm0,4.737c6.069,0 10.997,4.927 10.997,10.996c-0,6.069 -4.928,10.996 -10.997,10.996c-6.068,0 -10.996,-4.927 -10.996,-10.996c0,-6.069 4.928,-10.996 10.996,-10.996Z" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.216,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.9,2.196 -4.9,4.901c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.666,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.99,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.737,61.103c1.909,-1.91 1.909,-5.011 -0,-6.921l-0.01,-0.01c-1.91,-1.91 -5.011,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.91,1.91 5.011,1.91 6.921,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.676,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.524,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l0,-0.01c0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.216,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901c-0,2.704 2.196,4.9 4.9,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.734,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.103,34.623c-2.7,0 -4.892,2.192 -4.892,4.892l-0,0.019c-0,2.699 2.192,4.891 4.892,4.891c2.699,0 4.891,-2.192 4.891,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.891,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>
</a>

<script>
(function() {
    const LOCAL_STORAGE_KEY = 'piccoloThemeMode'

    var initialMode = localStorage.getItem(LOCAL_STORAGE_KEY)

    if (initialMode) {
        // Make sure the value in local storage is valid
        if (['light', 'dark', 'darkest'].indexOf(initialMode) == -1) {
            initialMode = 'light'
            localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
        }
    } else {
        // Check if the client prefers dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            initialMode = 'dark'
        } else {
            initialMode = 'light'
        }
        localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
    }

    document.documentElement.dataset.mode = initialMode

    PetiteVue.createApp({
        'mode': initialMode,
        handleClick() {
            let currentMode = this.mode

            if (currentMode == 'light') {
                this.mode = 'dark'
            } else if (currentMode == 'dark') {
                this.mode = 'darkest'
            } else if (currentMode == 'darkest') {
                this.mode = 'light'
            }

            document.documentElement.dataset.mode = this.mode
            localStorage.setItem(LOCAL_STORAGE_KEY, this.mode)

            console.log(this.mode)
        }
    }).mount('#mode_toggle')
})()
</script>
            <p class="mobile_search_link">
                <a href="search.html" title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 64" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
                        <path d="M14.873 40.009c-2.315-3.943-3.642-8.532-3.642-13.429C11.231 11.91 23.141 0 37.811 0s26.58 11.91 26.58 26.58-11.91 26.58-26.58 26.58a26.44 26.44 0 0 1-14.277-4.161L9.739 62.794a3.12 3.12 0 0 1-4.413 0L.913 58.382c-1.217-1.218-1.217-3.196 0-4.413l13.96-13.96zM37.811 8.054c10.225 0 18.526 8.301 18.526 18.526s-8.301 18.526-18.526 18.526-18.526-8.301-18.526-18.526S27.586 8.054 37.811 8.054z" fill="#fff" />
                    </svg>
                </a>
            </p>
        

        <div class="searchbox_wrapper">
            
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Ricerca veloce</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Vai" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
    </nav>
</div>

    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><p class="caption" role="heading"><span class="caption-text">Indice dei Contenuti</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduzione</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">2. Principi di design</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture-overview.html">3. Panoramica dell'Architettura</a></li>
<li class="toctree-l1"><a class="reference internal" href="trust.html">4. L'Infrastruttura di Trust</a></li>
<li class="toctree-l1"><a class="reference internal" href="entities.html">5. Entità</a></li>
<li class="toctree-l1"><a class="reference internal" href="digital-credential-management.html">6. Gestione degli Attestati Elettronici</a></li>
<li class="toctree-l1"><a class="reference internal" href="digital-credential-flows.html">7. Flussi relativi agli Attestati Elettronici</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="endpoints.html">8. Endpoints</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="wallet-provider-endpoint.html">8.1. Endpoint del Fornitore di Wallet</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">8.2. Endpoint del Credential Issuer</a></li>
<li class="toctree-l2"><a class="reference internal" href="relying-party-endpoint.html">8.3. Endpoint della Relying Party</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentic-source-endpoint.html">8.4. Endpoint delle Fonti Autentiche</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">9. Algoritmi Crittografici</a></li>
<li class="toctree-l1"><a class="reference internal" href="security-privacy-considerations.html">10. Considerazioni di Sicurezza e Privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-retention-policy.html">11. Politiche Generali di Conservazione dei Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="defined-terms-and-references.html">12. Termini Definiti e Riferimenti</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">13. Come contribuire</a></li>
<li class="toctree-l1"><a class="reference internal" href="open-source.html">14. Rilasci Open Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">15. Appendice</a></li>
</ul>

        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="endpoint-del-credential-issuer">
<h1><span class="section-number">8.2. </span>Endpoint del Credential Issuer<a class="headerlink" href="#endpoint-del-credential-issuer" title="Link to this heading">¶</a></h1>
<section id="endpoint-di-federazione">
<h2><span class="section-number">8.2.1. </span>Endpoint di Federazione<a class="headerlink" href="#endpoint-di-federazione" title="Link to this heading">¶</a></h2>
<p>I Credential Issuer DEVONO fornire una Entity Configuration attraverso l'endpoint <code class="docutils literal notranslate"><span class="pre">/.well-known/openid-federation</span></code>, in accordo alla Sezione <a class="reference internal" href="trust.html#entity-configuration"><span class="std std-ref">Entity Configuration</span></a>. I dettagli tecnici sono forniti nella Sezione <a class="reference internal" href="credential-issuer-entity-configuration.html#entity-configuration-del-fornitore-di-attestati-elettronici"><span class="std std-ref">Entity Configuration del Fornitore di Attestati Elettronici</span></a>.</p>
</section>
<section id="endpoint-relativi-all-emissione-delgli-attestati-elettronici">
<h2><span class="section-number">8.2.2. </span>Endpoint relativi all'Emissione delgli Attestati Elettronici<a class="headerlink" href="#endpoint-relativi-all-emissione-delgli-attestati-elettronici" title="Link to this heading">¶</a></h2>
<section id="credential-offer-endpoint">
<h3><span class="section-number">8.2.2.1. </span>Credential Offer Endpoint<a class="headerlink" href="#credential-offer-endpoint" title="Link to this heading">¶</a></h3>
<p>Il Credential Offer Endpoint di un Wallet è utilizzato dal Credential Issuer per interagire con l'Utente al fine di avviare un'Emissione di un Attestato Elettronico. DEVE essere utilizzato il <em>custom URL</em> <code class="docutils literal notranslate"><span class="pre">openid-credential-offer://</span></code>.</p>
<section id="credential-offer">
<h4><span class="section-number">8.2.2.1.1. </span>Credential Offer<a class="headerlink" href="#credential-offer" title="Link to this heading">¶</a></h4>
<p>La Credential Offer effettuata dal Credential Issuer consiste in un singolo parametro da inviare in query URI <code class="docutils literal notranslate"><span class="pre">credential_offer</span></code>. L'URL rappresentativa della Credential Offer PUÒ essere inclusa in un QR Code o in una pagina html con un pulsante href e DEVE contenere i seguenti parametri obbligatori:</p>
<table class="longtable docutils align-default" id="table-credential-offer-claim">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>credential_issuer</strong></p></td>
<td><p>DEVE essere valorizzato con una URL HTTPS che identifica in modo univoco il Credential Issuer. Il Wallet utilizza il valore di questo parametro per ottenere i Metadata del Credential Issuer.</p></td>
<td><p>Sezione 4.1.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>credential_configuration_ids</strong></p></td>
<td><p>Array di Stringhe, ciascuna delle quali specifica un identificativo univoco dell'Attestato Elettronico descritta nel claim <code class="docutils literal notranslate"><span class="pre">credential_configurations_supported</span></code> presente nei Metadata del Credential Issuer.</p></td>
<td><p>Sezione 4.1.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>grants</strong></p></td>
<td><p>DEVE contenere un oggetto <code class="docutils literal notranslate"><span class="pre">authorization_code</span></code> con i seguenti parametri:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>issuer_state</strong>: OBBLIGATORIO. Stringa opaca creata dal Credential Issuer utilizzata per correlare la successiva Authorization Request con il Credential Issuer. Il Wallet DEVE includerla nella successiva Authorization Request.</p></li>
<li><p><strong>authorization_server</strong>: OBBLIGATORIO se il Credential Issuer utilizza più di un authorization server nella sua Soluzione di Fornitore di Attestati Elettronici. Stringa che identifica l'Authorization Server da utilizzare. Il valore DEVE corrispondere a uno dei valori censiti nell'array <code class="docutils literal notranslate"><span class="pre">authorization_servers</span></code> dei Metadata del Credential Issuer. NON DEVE essere utilizzato se <code class="docutils literal notranslate"><span class="pre">authorization_servers</span></code> è assente o non ha voci.</p></li>
</ul>
</div></blockquote>
</td>
<td><p>Sezione 4.1.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
</tbody>
</table>
</section>
<section id="credential-offer-response">
<h4><span class="section-number">8.2.2.1.2. </span>Credential Offer Response<a class="headerlink" href="#credential-offer-response" title="Link to this heading">¶</a></h4>
<p>Non è prevista alcuna response da parte del Wallet.</p>
</section>
</section>
<section id="pushed-authorization-request-endpoint">
<h3><span class="section-number">8.2.2.2. </span>Pushed Authorization Request Endpoint<a class="headerlink" href="#pushed-authorization-request-endpoint" title="Link to this heading">¶</a></h3>
<section id="pushed-authorization-request-par-request">
<h4><span class="section-number">8.2.2.2.1. </span>Pushed Authorization Request (PAR) Request<a class="headerlink" href="#pushed-authorization-request-par-request" title="Link to this heading">¶</a></h4>
<p>La request all'authorization endpoint del Credential Issuer DEVE contenere sia i parametri di header HTTP che i parametri HTTP POST.</p>
<p>Il metodo HTTP POST DEVE avere i parametri nel body del messaggio codificati in formato <code class="docutils literal notranslate"><span class="pre">application/x-www-form-urlencoded</span></code>.</p>
<span id="table-http-request-claim"></span><table class="longtable docutils align-default" id="id74">
<caption><span class="caption-number">Tabella 8.2 </span><span class="caption-text">Parametri della PAR request http</span><a class="headerlink" href="#id74" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>client_id</strong></p></td>
<td><p>DEVE essere valorizzato con il <em>thumbprint</em> del <code class="docutils literal notranslate"><span class="pre">jwk</span></code> presente nel parametro <code class="docutils literal notranslate"><span class="pre">cnf</span></code> all'interno dell'Attestato di Unità di Wallet.</p></td>
<td><p><span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html"><strong>RFC 6749</strong></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>request</strong></p></td>
<td><p>DEVE essere un JWT firmato. La chiave privata corrispondente a quella pubblica presente nel parametro <code class="docutils literal notranslate"><span class="pre">cnf</span></code> all'interno dell'Attestato di Unità di Wallet che DEVE essere utilizzata per firmare ilRequest Object.</p></td>
<td><p><a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html#JWTRequests">OpenID Connect Core. Sezione 6</a></p></td>
</tr>
</tbody>
</table>
<p>Il Pushed Authorization Endpoint è protetto con <em>OAuth 2.0 Attestation-based Client Authentication</em> [<a class="reference external" href="https://datatracker.ietf.org/doc/draft-ietf-oauth-attestation-based-client-auth/03/">OAUTH-ATTESTATION-CLIENT-AUTH</a>], pertanto
la richiesta all'authorization endpoint del Credential Issuer DEVE utilizzare i seguenti parametri di header HTTP:</p>
<span id="table-http-request-headers-claim"></span><table class="longtable docutils align-default" id="id75">
<caption><span class="caption-number">Tabella 8.3 </span><span class="caption-text">parametri di header della request http</span><a class="headerlink" href="#id75" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>OAuth-Client-Attestation</strong></p></th>
<th class="head"><p>DEVE contenere il JWT dell'Attestato di Unità di Wallet.</p></th>
<th class="head"><p><a class="reference external" href="https://datatracker.ietf.org/doc/draft-ietf-oauth-attestation-based-client-auth/03/">OAUTH-ATTESTATION-CLIENT-AUTH</a>.</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>OAuth-Client-Attestation-PoP</strong></p></td>
<td><p>DEVE contenere la Prova di Possesso del JWT dell'Attestato di Unità di Wallet.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/draft-ietf-oauth-attestation-based-client-auth/03/">OAUTH-ATTESTATION-CLIENT-AUTH</a>.</p></td>
</tr>
</tbody>
</table>
<p>Il JWT <em>Request Object</em> ha i seguenti parametri di header JOSE:</p>
<table class="longtable docutils align-default" id="table-request-object-claim">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>JOSE Header</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>alg</strong></p></td>
<td><p>Identificativo dell'algoritmo di firma digitale come definito nel registro IANA &quot;JSON Web Signature and Encryption Algorithms&quot;. DEVE essere uno degli algoritmi supportati elencati nella Sezione <a class="reference internal" href="algorithms.html#algoritmi-crittografici"><span class="std std-ref">Algoritmi Crittografici</span></a> e NON DEVE essere valorizzato con <code class="docutils literal notranslate"><span class="pre">none</span></code> o con qualsiasi identificativo di algoritmo simmetrico (MAC).</p></td>
<td><p><span class="target" id="index-1"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7516.html#section-4.1.1"><strong>RFC 7516#section-4.1.1</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>kid</strong></p></td>
<td><p>Identificativo univoco del <code class="docutils literal notranslate"><span class="pre">jwk</span></code> presente all'interno del claim <code class="docutils literal notranslate"><span class="pre">cnf</span></code> dell'Attestato di Unità di Wallet, ovvero il valore del <em>thumbprint</em> del JWK codificato in base64url.</p></td>
<td><p><span class="target" id="index-2"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7638.html#section_3"><strong>RFC 7638#section_3</strong></a>.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Il parametro <strong>typ</strong>, se omesso, assume il valore implicito <strong>JWT</strong>.</p>
</div>
<p>Il payload del JWT <code class="docutils literal notranslate"><span class="pre">request</span></code> contenuto nel messaggio HTTP POST contiene i seguenti parametri:</p>
<table class="longtable docutils align-default" id="table-jwt-request">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>DEVE essere valorizzato con il <code class="docutils literal notranslate"><span class="pre">client_id</span></code>.</p></td>
<td><p><span class="target" id="index-3"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-4"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>aud</strong></p></td>
<td><p>DEVE essere valorizzato con l'identificativo del Credential Issuer.</p></td>
<td><p><span class="target" id="index-5"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-6"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>exp</strong></p></td>
<td><p>Timestamp UNIX con orario di scadenza del JWT. Il valore NON DEVE essere superiore a 300 secondi rispetto all'orario di emissione.</p></td>
<td><p><span class="target" id="index-7"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-8"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>iat</strong></p></td>
<td><p>Timestamp UNIX con data e orario di emissione del JWT.</p></td>
<td><p><span class="target" id="index-9"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-10"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>response_type</strong></p></td>
<td><p>DEVE essere valorizzato con <code class="docutils literal notranslate"><span class="pre">code</span></code>.</p></td>
<td><p><span class="target" id="index-11"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html"><strong>RFC 6749</strong></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>response_mode</strong></p></td>
<td><p>DEVE essere una stringa che indica il &quot;<em>response_mode</em>&quot;, come specificato in [<a class="reference external" href="https://openid.net/specs/oauth-v2-multiple-response-types-1_0.html">OAUTH-MULT-RESP-TYPE</a>]. DEVE essere valorizzato con uno dei valori supportati (<em>response_modes_supported</em>) forniti nei Metadata del Credential Issuer. Tale claim informa il Credential Issuer sul meccanismo da utilizzare per la restituizione dei parametri da parte dell' Authorization Endpoint. In caso di <em>HTTP 302 Redirect Response</em> il valore DEVE essere <em>query</em>. In questa modalità, i parametri dell'Authorization Response sono codificati nella stringa di query aggiunta al <code class="docutils literal notranslate"><span class="pre">redirect_uri</span></code> durante il redirect all'Istanza del Wallet. In caso di <em>HTTP POST Response</em> il valore DEVE essere <em>form_post.jwt</em> secondo [<a class="reference external" href="https://openid.net/specs/oauth-v2-jarm-final.html">JARM</a>]. In questa modalità, i parametri dell'Authorization Response sono riportati in un JWT codificato in un form HTML che viene inviato automaticamente nell'user-agent, e quindi viene trasmesso tramite il metodo HTTP POST all'Istanza del Wallet, con i parametri risultanti codificati nel body utilizzando il formato <em>application/x-www-form-urlencoded</em>. L'attributo <em>action</em> del form DEVE contenere il  <em>Redirection URI</em> dell'Istanza del Wallet. L'attributo <em>method</em> del form DEVE essere POST.</p></td>
<td><p>Vedi [<a class="reference external" href="https://openid.net/specs/oauth-v2-multiple-response-types-1_0.html">OAUTH-MULT-RESP-TYPE</a>] e [<a class="reference external" href="https://openid.net/specs/oauth-v2-jarm-final.html">JARM</a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>client_id</strong></p></td>
<td><p>DEVE essere valorizzato come indicato nella <a class="reference internal" href="#table-http-request-claim"><span class="std std-ref">Tabella dei parametri HTTP</span></a>.</p></td>
<td><p>Vedi <a class="reference internal" href="#table-http-request-claim"><span class="std std-ref">Tabella dei parametri HTTP</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>state</strong></p></td>
<td><p>Identificativo univoco della sessione lato client. Questo valore verrà restituito al client nella response, al termine dell'autenticazione. DEVE essere una stringa casuale composta da caratteri alfanumerici e con una lunghezza minima di 32 cifre. Tra i caratteri speciali DEVONO essere considerati quelli non alfanumerici definiti in <a class="reference external" href="https://csrc.nist.gov/glossary/term/special_character">[NIST]</a>.</p></td>
<td><p>Vedi [<a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html">OIDC</a>] Sezione 3.1.2.1.</p></td>
</tr>
<tr class="row-even"><td><p><strong>code_challenge</strong></p></td>
<td><p><em>Challenge</em> derivata dal <strong>code verifier</strong> che viene inviata nell'authorization request.</p></td>
<td><p><span class="target" id="index-12"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7636.html#section-4.2"><strong>RFC 7636#section-4.2</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>code_challenge_method</strong></p></td>
<td><p>Metodo utilizzato per derivare il <strong>code challenge</strong>. DEVE essere valorizzato con <code class="docutils literal notranslate"><span class="pre">S256</span></code>.</p></td>
<td><p><span class="target" id="index-13"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7636.html#section-4.3"><strong>RFC 7636#section-4.3</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>scope</strong></p></td>
<td><p>Stringa JSON. Stringa contenente un identificativo univoco dell'Attestato Elettronico indipendentemente dal suo formato. DEVE essere mappato nel claim <cite>credential_configurations_supported</cite> presente nei Metadata del Credential Issuer. Il valore dell'identificativo univoco DEVE corrispondere al parametro <cite>credential_type</cite> del <a class="reference internal" href="registry-catalogue.html#catalogo-degli-attestati-elettronici"><span class="std std-ref">Catalogo degli Attestati Elettronici</span></a>. Ad esempio, nel caso del PID, può essere valorizzato con <code class="docutils literal notranslate"><span class="pre">PersonIdentificationData</span></code> mentre nel caso della patente di guida <code class="docutils literal notranslate"><span class="pre">mDL</span></code>. Poiché PUÒ essere multivalore, quando ciò si verifica ogni valore DEVE essere separato da uno spazio.</p></td>
<td><p><span class="target" id="index-14"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html"><strong>RFC 6749</strong></a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>authorization_details</strong></p></td>
<td><p>Array di Oggetti JSON. Ogni Oggetto JSON DEVE includere i seguenti claim:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>type</strong>: DEVE essere valorizzato con <code class="docutils literal notranslate"><span class="pre">openid_credential</span></code>,</p></li>
<li><p><strong>credential_configuration_id</strong>: Stringa JSON. Stringa che indica un identificativo univoco dell'Attestato Elettronico in uno specifico formato che DEVE essere mappato nel claim <cite>credential_configurations_supported</cite> presente nei Metadata del Credential Issuer. Ad esempio, <code class="docutils literal notranslate"><span class="pre">dc_sd_jwt_PersonIdentificationData</span></code> può essere utilizzato per il PID in formato SD-JWT VC, <code class="docutils literal notranslate"><span class="pre">dc_sd_jwt_mDL</span></code> per la patente di guida in formato SD-JWT VC e <code class="docutils literal notranslate"><span class="pre">mso_mdoc_mDL</span></code> per la patente di guida in formato mdoc.</p></li>
</ul>
</div></blockquote>
</td>
<td><p>Vedi [RAR <span class="target" id="index-15"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9396.html"><strong>RFC 9396</strong></a>] e [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>redirect_uri</strong></p></td>
<td><p><em>Redirection URI</em> a cui è indirizzata la response. DEVE essere un <em>universal link</em> oppure un <em>app link</em> registrato nel sistema operativo locale, in modo tale che quest'ultimo potrà fornirà la response all'Istanza del Wallet.</p></td>
<td><p>Vedi [<a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html">OIDC</a>] Sezione 3.1.2.1.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>jti</strong></p></td>
<td><p>Identificativo univoco del JWT che, insieme al valore contenuto nel claim <code class="docutils literal notranslate"><span class="pre">iss</span></code>, impedisce il riutilizzo del JWT (<em>replay attack</em>). Siccome il valore del <cite>jti</cite> da solo non è resistente alle collisioni, esso DOVRA' essere identificato in modo univoco insieme al suo emittente.</p></td>
<td><p>[<span class="target" id="index-16"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>issuer_state</strong></p></td>
<td><p>DEVE essere presente solo in caso di <em>issuer initiated flow*</em>. DEVE contenere lo stesso valore presente nel Credential Offer.</p></td>
<td><p>[<span class="target" id="index-17"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>].</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Se la request contiene sia <em>scope</em> che il parametro <em>authorization_details</em>, il Credential Issuer DEVE interpretarli individualmente. Tuttavia, se entrambi richiedono lo stesso tipo di Attestato Elettronico, il Credential Issuer DEVE eseguire la richiesta come se pervenuta soltanto dall'oggetto authorization details.</p>
</div>
<p>Il JOSE Header della prova di possesso dell'Attestato di Unità di Wallet, contenuta negli header della HTTP Request, DEVE contenere:</p>
<table class="longtable docutils align-default" id="table-jwt-pop">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>JOSE Header</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>alg</strong></p></td>
<td><p>Identificativo dell'algoritmo di firma digitale come definito nel registro IANA &quot;JSON Web Signature and Encryption Algorithms&quot;. DEVE essere uno degli algoritmi supportati elencati nella Sezione <a class="reference internal" href="algorithms.html#algoritmi-crittografici"><span class="std std-ref">Algoritmi Crittografici</span></a> e NON DEVE essere valorizzato con <code class="docutils literal notranslate"><span class="pre">none</span></code> o con qualsiasi identificativo di algoritmo simmetrico (MAC).</p></td>
<td><p><span class="target" id="index-18"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7516.html#section-4.1.1"><strong>RFC 7516#section-4.1.1</strong></a>.</p></td>
</tr>
</tbody>
</table>
<p>Il body del JWT relativo alla prova di possesso dell'Attestato di Unità di Wallet, contenuto negli header della HTTP Request, DEVE contenere:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p><em>thumbprint</em> del JWK contenuto nel parametro <code class="docutils literal notranslate"><span class="pre">cnf</span></code>.</p></td>
<td><p><span class="target" id="index-19"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-20"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>aud</strong></p></td>
<td><p>DEVE essere valorizzato con l'identificativo del Credential Issuer.</p></td>
<td><p><span class="target" id="index-21"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-22"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>exp</strong></p></td>
<td><p>Timestamp UNIX con data e orario di scadenza del JWT.</p></td>
<td><p><span class="target" id="index-23"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-24"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>iat</strong></p></td>
<td><p>Timestamp UNIX con data e orario di emissione del JWT.</p></td>
<td><p><span class="target" id="index-25"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-26"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>jti</strong></p></td>
<td><p>Identificativo univoco per il JWT <em>DPoP proof</em>. Il valore DOVREBBE essere impostato utilizzando un valore <em>UUID v4</em> secondo [<span class="target" id="index-27"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc4122.html"><strong>RFC 4122</strong></a>].</p></td>
<td><p>[<span class="target" id="index-28"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>. Sezione 4.1.7].</p></td>
</tr>
</tbody>
</table>
</section>
<section id="pushed-authorization-request-par-response">
<h4><span class="section-number">8.2.2.2.2. </span>Pushed Authorization Request (PAR) Response<a class="headerlink" href="#pushed-authorization-request-par-response" title="Link to this heading">¶</a></h4>
<p>Se i controlli hanno esito positivo, il Credential Issuer DEVE fornire la response con <em>status code HTTP 201</em>. I seguenti parametri sono inclusi come parametri di primo livello nel body del messaggio di HTTP Response, utilizzando il media type <code class="docutils literal notranslate"><span class="pre">application/json</span></code> come definito nel [<span class="target" id="index-29"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc8259.html"><strong>RFC 8259</strong></a>].</p>
<table class="longtable docutils align-default" id="table-http-response-claim">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>request_uri</strong></p></td>
<td><p>Request URI associato all'authorization request inviata. Questo URI DEVE essere utilizzabile una sola volta per la corrispondente authorization request. DEVE contenere alcune parti generate utilizzando un algoritmo pseudocasuale crittograficamente forte. Il suo valore DEVE seguire il seguente formato: <code class="docutils literal notranslate"><span class="pre">urn:ietf:params:oauth:request_uri:&lt;reference-value&gt;</span></code> con <code class="docutils literal notranslate"><span class="pre">&lt;reference-value&gt;</span></code> come parte random dello URI che fa riferimento ai dati inviati nell'authorization request.</p></td>
<td><p>[<span class="target" id="index-30"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>expires_in</strong></p></td>
<td><p><em>JSON number</em>, numero intero positivo, che rappresenta la durata del Request URI in secondi.</p></td>
<td><p>[<span class="target" id="index-31"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a>].</p></td>
</tr>
</tbody>
</table>
<p>Se si verificano errori durante la PAR Request, l'Authorization Server DEVE restituire una response di errore come definito nel <span class="target" id="index-32"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html#section-2.3"><strong>RFC 9126#section-2.3</strong></a>. La response DEVE avere un content type <em>application/json</em> e DEVE includere i seguenti parametri:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>error</em>. Il codice di errore.</p></li>
<li><p><em>error_description</em>. Testo in forma <em>human-readable</em> che fornisce ulteriori dettagli per chiarire la natura dell'errore riscontrato.</p></li>
</ul>
</div></blockquote>
<p>Di seguito è riportato un esempio non normativo di una response di errore.</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">400</span> <span class="ne">Bad Request</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
</pre></div>
</div>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;invalid_request&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;error_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The redirect_uri is not valid for the given client&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Nella seguente tabella sono elencati gli <em>Status Code HTTP</em> e i relativi codici di errore supportati per la response di errore:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Status Code</strong></p></th>
<th class="head"><p><strong>codice di errore</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_request</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta a causa di parametri mancanti, parametri non validi o richiesta malformata. (<span class="target" id="index-33"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_scope</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta perché lo scope richiesto non è valido oppure è sconosciuto. (<span class="target" id="index-34"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
</tr>
<tr class="row-even"><td><p><em>401 Unauthorized</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_client</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta a causa del fallimento della <em>Client Authentication</em> (ad esempio in caso di client sconosciuto, nessun parametro relativo alla Client Authentication presente oppure se il metodo di autenticazione non è supportato). (<span class="target" id="index-35"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><em>405 Method not allowed</em> [OPZIONALE]</p></td>
<td><p><cite>-</cite></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta perché il metodo POST non è stato utilizzato nella richiesta. (<span class="target" id="index-36"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html#section-2.3"><strong>RFC 9126#section-2.3</strong></a>).</p></td>
</tr>
<tr class="row-even"><td><p><em>413 Payload Too Large</em> [OPZIONALE]</p></td>
<td><p><cite>-</cite></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta perché la dimensione della richiesta è superiore al limite consentito.(<span class="target" id="index-37"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html#section-2.3"><strong>RFC 9126#section-2.3</strong></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><em>429 Too Many Requests</em> [OPZIONALE]</p></td>
<td><p><cite>-</cite></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta perché il numero di richieste ricevute è superiore al limite consentito.(<span class="target" id="index-38"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html#section-2.3"><strong>RFC 9126#section-2.3</strong></a>).</p></td>
</tr>
<tr class="row-even"><td><p><em>500 Internal Server Error</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">server_error</span></code></p></td>
<td><p>Il Credential Issuer ha riscontrato un problema interno. (<span class="target" id="index-39"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-4.1.2.1"><strong>RFC 6749#section-4.1.2.1</strong></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><em>503 Service Unavailable</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">temporarily_unavailable</span></code></p></td>
<td><p>Il Credential Issuer è temporaneamente non disponibile. (<span class="target" id="index-40"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-4.1.2.1"><strong>RFC 6749#section-4.1.2.1</strong></a>).</p></td>
</tr>
<tr class="row-even"><td><p><em>504 Gateway Timeout</em> [OPZIONALE]</p></td>
<td><p><cite>-</cite></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta entro l'intervallo di tempo definito.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="authorization-endpoint">
<h3><span class="section-number">8.2.2.3. </span>Authorization endpoint<a class="headerlink" href="#authorization-endpoint" title="Link to this heading">¶</a></h3>
<p>L'authorization endpoint viene utilizzato per interagire con il Credential Issuer e ottenere un <em>authorization grant</em>.
L'authorization server DEVE prima verificare l'identità dell'Utente proprietario dell'Attestato Elettronico.</p>
<section id="authorization-request">
<h4><span class="section-number">8.2.2.3.1. </span>Authorization Request<a class="headerlink" href="#authorization-request" title="Link to this heading">¶</a></h4>
<p>L'authorization request viene inviata dal Browser Web in uso dall'Istanza del Wallet usando i metodi HTTP <strong>POST</strong> o <strong>GET</strong>. Se viene utilizzato il metodo <strong>POST</strong>, i parametri DEVONO essere inviati utilizzando la <em>Form Serialization</em>. Quando viene utilizzato il metodo <strong>GET</strong>, i parametri DEVONO essere inviati utilizzando la <em>Query String Serialization</em>. Per maggiori dettagli vedere la Sezione 13 di [<a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html">OIDC</a>].</p>
<p>I parametri obbligatori nell'authentication request HTTP sono specificati nella seguente tabella.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>client_id</strong></p></td>
<td><p>DEVE essere valorizzato come indicato nella <a class="reference internal" href="#table-http-request-claim"><span class="std std-ref">Tabella dei parametri HTTP</span></a>.</p></td>
<td><p>Vedi <a class="reference internal" href="#table-http-request-claim"><span class="std std-ref">Tabella dei parametri HTTP</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>request_uri</strong></p></td>
<td><p>DEVE essere valorizzato con lo stesso valore ottenuto dalla PAR Response. Vedi <a class="reference internal" href="#table-http-response-claim"><span class="std std-ref">Tabella dei parametri della Risposta HTTP PAR</span></a>.</p></td>
<td><p>[<span class="target" id="index-41"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a>].</p></td>
</tr>
</tbody>
</table>
</section>
<section id="authorization-response">
<h4><span class="section-number">8.2.2.3.2. </span>Authorization Response<a class="headerlink" href="#authorization-response" title="Link to this heading">¶</a></h4>
<p>L'authentication response viene restituita dall'authorization endpoint del Credential Issuer al termine del flusso di autenticazione.</p>
<p>Se l'autenticazione ha esito positivo, il Credential Issuer reindirizza l'Utente aggiungendo i seguenti parametri di query al <em>redirect_uri</em>. Il redirect URI DEVE essere un <em>universal link</em> o un <em>app link</em> registrato nel sistema operativo locale, in modo che quest'ultimo sia in grado di fornire la response all'Istanza del Wallet.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>code</strong></p></td>
<td><p><em>Authorization Code</em> univoco che l'Istanza del Wallet invia al Token Endpoint.</p></td>
<td><p>[<span class="target" id="index-42"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-4.1.2"><strong>RFC 6749#section-4.1.2</strong></a>], [<span class="target" id="index-43"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7521.html"><strong>RFC 7521</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>state</strong></p></td>
<td><p>L'Istanza del Wallet DEVE verificare la corrispondenza con il valore presente nel parametro <code class="docutils literal notranslate"><span class="pre">state</span></code> del Request Object, come definito nella <a class="reference internal" href="#table-jwt-request"><span class="std std-ref">Tabella dei parametri della Richiesta JWT</span></a>.</p></td>
<td><p>[<span class="target" id="index-44"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-4.1.2"><strong>RFC 6749#section-4.1.2</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>Identificativo univoco del Credential Issuer che ha creato l'Authentication Response. L'Istanza del Wallet DEVE validare questo parametro.</p></td>
<td><p>[<span class="target" id="index-45"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9207.html"><strong>RFC 9207</strong></a>], [<span class="target" id="index-46"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>, Sezione 4.1.1.].</p></td>
</tr>
</tbody>
</table>
<p>Se si verificano errori durante l'Authorization Request, l'Authorization Server DEVE restituire una response di errore come definito nel <span class="target" id="index-47"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-4.1.2.1"><strong>RFC 6749#section-4.1.2.1</strong></a>.
In caso di <code class="docutils literal notranslate"><span class="pre">redirect_uri</span></code> o <code class="docutils literal notranslate"><span class="pre">client_id</span></code> non valido/mancante, l'Authorization Server DEVE informare l'Utente con l'errore e NON DEVE reindirizzare l'Utente verso il <em>Redirection URI</em>.
Se si verifica qualsiasi altro errore, l'Authorization Server DEVE reindirizzare l'Utente aggiungendo i seguenti parametri in query come richiesto al <em>redirect_uri</em> utilizzando il formato <em>application/x-www-form-urlencoded</em>:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>error</em>. Il codice di errore.</p></li>
<li><p><em>error_description</em>. Testo in forma <em>human-readable</em> che fornisce ulteriori dettagli per chiarire la natura dell'errore riscontrato.</p></li>
<li><p><em>state</em>. Il valore esatto del parametro <code class="docutils literal notranslate"><span class="pre">state</span></code> contenuto nel Request Object.</p></li>
</ul>
</div></blockquote>
<p>Di seguito è riportato un esempio non normativo di una response di errore.</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">302</span> <span class="ne">Found</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">https://client.example.com/cb?</span>
 <span class="l">error=invalid_request</span>
 <span class="l">&amp;error_description=Unsupported%20response_type%20value</span>
 <span class="l">&amp;state=fyZiOL9Lf2CeKuNT2JzxiLRDink0uPcd</span>
</pre></div>
</div>
<p>Nel caso in cui l'Authorization Server reindirizza l'Utente verso il <em>redirect_uri</em> DEVE essere utilizzato lo <em>status code HTTP 302 (Found)</em>. I seguenti codici di errore sono supportati per la response di errore:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Status Code</strong></p></th>
<th class="head"><p><strong>codice di errore</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>302 Found</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_request</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta a causa di parametri mancanti, parametri non validi o richiesta malformata. (<span class="target" id="index-48"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-4.1.2.1"><strong>RFC 6749#section-4.1.2.1</strong></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><em>302 Found</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">unauthorized_client</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta perché il client non è autorizzato a richiedere <em>authorization code</em>. (<span class="target" id="index-49"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-4.1.2.1"><strong>RFC 6749#section-4.1.2.1</strong></a>).</p></td>
</tr>
<tr class="row-even"><td><p><em>302 Found</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">server_error</span></code></p></td>
<td><p>Il Credential Issuer ha riscontrato un problema interno. (<span class="target" id="index-50"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-4.1.2.1"><strong>RFC 6749#section-4.1.2.1</strong></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><em>302 Found</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">temporarily_unavailable</span></code></p></td>
<td><p>Il Credential Issuer è temporaneamente non disponibile. (<span class="target" id="index-51"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-4.1.2.1"><strong>RFC 6749#section-4.1.2.1</strong></a>).</p></td>
</tr>
</tbody>
</table>
<p>Nel caso in cui l'Authorization Server non reindirizza l'Utente verso il <em>redirect_uri</em> i seguenti <em>Status Code HTTP</em> sono supportati per la respomse di errore:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Codice di Stato</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta a causa del parametro <code class="docutils literal notranslate"><span class="pre">redirect_uri</span></code> o <code class="docutils literal notranslate"><span class="pre">client_id</span></code> non valido/mancante.</p></td>
</tr>
<tr class="row-odd"><td><p><em>500 Internal Server Error</em> [OBBLIGATORIO]</p></td>
<td><p>Il Credential Issuer ha riscontrato un problema interno.</p></td>
</tr>
<tr class="row-even"><td><p><em>503 Service Unavailable</em> [OBBLIGATORIO]</p></td>
<td><p>Il Credential Issuer è temporaneamente non disponibile.</p></td>
</tr>
<tr class="row-odd"><td><p><em>504 Gateway Timeout</em> [OPZIONALE]</p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta entro l'intervallo di tempo definito.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="token-endpoint">
<h3><span class="section-number">8.2.2.4. </span>Token Endpoint<a class="headerlink" href="#token-endpoint" title="Link to this heading">¶</a></h3>
<p>Il Token Endpoint viene utilizzato dall'Istanza del Wallet per ottenere un <em>Access Token</em> previa presentazione dell'<em>authorization grant</em>, come
definito nel <span class="target" id="index-52"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html"><strong>RFC 6749</strong></a>. Il Token Endpoint è un endpoint protetto con <em>OAuth 2.0 Attestation-based Client Authentication</em> [<a class="reference external" href="https://datatracker.ietf.org/doc/draft-ietf-oauth-attestation-based-client-auth/03/">OAUTH-ATTESTATION-CLIENT-AUTH</a> ].</p>
<section id="token-request">
<h4><span class="section-number">8.2.2.4.1. </span>Token Request<a class="headerlink" href="#token-request" title="Link to this heading">¶</a></h4>
<p>La richiesta al Token Endpoint del Credential Issuer DEVE essere una HTTP request con metodo POST, con il body del messaggio codificato in formato <code class="docutils literal notranslate"><span class="pre">application/x-www-form-urlencoded</span></code>. L'Istanza del Wallet invia la richiesta al Token Endpoint con <code class="docutils literal notranslate"><span class="pre">OAuth-Client-Attestation</span></code> e <code class="docutils literal notranslate"><span class="pre">OAuth-Client-Attestation-PoP</span></code> come parametri di header secondo <a class="reference external" href="https://datatracker.ietf.org/doc/draft-ietf-oauth-attestation-based-client-auth/03/">OAUTH-ATTESTATION-CLIENT-AUTH</a>.</p>
<p>Il Token Endpoint è protetto con <em>OAuth 2.0 Attestation-based Client Authentication</em> [<a class="reference external" href="https://datatracker.ietf.org/doc/draft-ietf-oauth-attestation-based-client-auth/03/">OAUTH-ATTESTATION-CLIENT-AUTH</a>], pertanto
la richiesta all'authorization endpoint del Credential Issuer DEVE utilizzare i seguenti parametri di header HTTP <strong>OAuth-Client-Attestation</strong> e <strong>OAuth-Client-Attestation-PoP</strong>
come definito in <a class="reference internal" href="credential-issuance-endpoint.html#pushed-authorization-request-endpoint"><span class="std std-ref">Pushed Authorization Request Endpoint</span></a>.</p>
<p>Il Token Endpoint emette il token DPoP, pertanto è OBBLIGATORIO che la request includa nel suo header HTTP il parametro <em>DPoP proof</em>.
L'Authorization Server DEVE convalidare il <em>DPoP proof</em> ricevuto al Token Endpoint, secondo quanto indicato nella Sezione 4.3 di <span class="target" id="index-53"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9449.html"><strong>RFC 9449</strong></a>. Ciò mitiga l'uso improprio di Access Token/Refresh Token persi o rubati al Credential/Token Endpoint. Se il <em>DPoP proof</em> non è valido, il Token Endpoint restituisce una response di errore, secondo quanto deinito nella Sezione 5.2 del [<span class="target" id="index-54"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html"><strong>RFC 6749</strong></a>] con <code class="docutils literal notranslate"><span class="pre">invalid_dpop_proof</span></code> come valore del parametro di errore.</p>
<p>La token request contiene i seguenti claim:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>grant_type</strong></p></td>
<td><p>OBBLIGATORIO. DEVE essere valorizzato con <code class="docutils literal notranslate"><span class="pre">authorization_code</span></code> o <code class="docutils literal notranslate"><span class="pre">refresh_token</span></code>.</p></td>
<td><p>[<span class="target" id="index-55"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html"><strong>RFC 6749</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>code</strong></p></td>
<td><p>OBBLIGATORIO solo se il <em>grant type</em> è <code class="docutils literal notranslate"><span class="pre">authorization_code</span></code>. L'Authorization code restituito nell'Authentication Response. NON DEVE essere presente se il <em>grant type</em> è <code class="docutils literal notranslate"><span class="pre">refresh_token</span></code>.</p></td>
<td><p>[<span class="target" id="index-56"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html"><strong>RFC 6749</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>redirect_uri</strong></p></td>
<td><p>OBBLIGATORIO solo se il <em>grant type</em> è <code class="docutils literal notranslate"><span class="pre">authorization_code</span></code>. DEVE essere valorizzato come nel Request Object  <a class="reference internal" href="#table-jwt-request"><span class="std std-ref">Tabella dei parametri della Richiesta JWT</span></a>. NON DEVE essere presente se il <em>grant type</em> è <code class="docutils literal notranslate"><span class="pre">refresh_token</span></code>.</p></td>
<td><p>[<span class="target" id="index-57"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc67491.html"><strong>RFC 67491</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>code_verifier</strong></p></td>
<td><p>OBBLIGATORIO solo se il <em>grant type</em> è <code class="docutils literal notranslate"><span class="pre">authorization_code</span></code>. Codice di verifica del <strong>code_challenge</strong>.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc7636">Proof Key for Code Exchange by OAuth Public Clients</a>. NON DEVE essere presente se il <em>grant type</em> è <code class="docutils literal notranslate"><span class="pre">refresh_token</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>refresh_token</strong></p></td>
<td><p>OBBLIGATORIO solo se il <em>grant type</em> è <code class="docutils literal notranslate"><span class="pre">refresh_token</span></code>. Il Refresh Token precedentemente emesso all'Istanza del Wallet. NON DEVE essere presente se il <em>grant type</em> è <code class="docutils literal notranslate"><span class="pre">authorization_code</span></code>.</p></td>
<td><p>[<span class="target" id="index-58"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html"><strong>RFC 6749</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>scope</strong></p></td>
<td><p>OPZIONALE solo se il <em>grant type</em> è <code class="docutils literal notranslate"><span class="pre">refresh_token</span></code>. Lo scope richiesto NON DEVE includere alcun valore di scope non originariamente concesso dall'Utente, e se omesso è da intendersi  uguale allo scope originariamente concesso dall'Utente. NON DEVE essere presente se il <em>grant type</em> è <code class="docutils literal notranslate"><span class="pre">authorization_code</span></code>.</p></td>
<td><p>[<span class="target" id="index-59"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html"><strong>RFC 6749</strong></a>].</p></td>
</tr>
</tbody>
</table>
<p>Un <em>JWT DPoP Proof*</em> è incluso nella request HTTP utilizzando il parametro di header <code class="docutils literal notranslate"><span class="pre">DPoP</span></code> contenente un JWT DPoP.</p>
<p>Il JOSE Header di un <strong>JWT DPoP</strong> DEVE contenere almeno i seguenti parametri:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>JOSE Header</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>typ</strong></p></td>
<td><p>DEVE essere uguale a <code class="docutils literal notranslate"><span class="pre">dpop+jwt</span></code>.</p></td>
<td><p>[<span class="target" id="index-60"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>] e [<span class="target" id="index-61"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc8725.html"><strong>RFC 8725</strong></a>. Sezione 3.11].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>alg</strong></p></td>
<td><p>Identificativo dell'algoritmo di firma digitale come definito nel registro IANA &quot;JSON Web Signature and Encryption Algorithms&quot;. DEVE essere uno degli algoritmi supportati elencati nella Sezione <a class="reference internal" href="algorithms.html#algoritmi-crittografici"><span class="std std-ref">Algoritmi Crittografici</span></a> e NON DEVE essere valorizzato con <code class="docutils literal notranslate"><span class="pre">none</span></code> o con qualsiasi identificativo di algoritmo simmetrico (MAC).</p></td>
<td><p>[<span class="target" id="index-62"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>jwk</strong></p></td>
<td><p>Rappresenta la chiave pubblica scelta dall'Istanza del Wallet, in formato JSON Web Key (JWK) [<span class="target" id="index-63"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7517.html"><strong>RFC 7517</strong></a>] a cui l'Access Token DEVE essere vincolato, come definito nella Sezione 4.1.3 del [<span class="target" id="index-64"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>]. NON DEVE contenere una chiave privata.</p></td>
<td><p>[<span class="target" id="index-65"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7517.html"><strong>RFC 7517</strong></a>] e [<span class="target" id="index-66"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>].</p></td>
</tr>
</tbody>
</table>
<p>Il payload del <strong>JWT DPoP Proof</strong> DEVE contenere i seguenti claim:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>jti</strong></p></td>
<td><p>Identificativo univoco per il JWT <em>DPoP proof</em>. Il valore DOVREBBE essere un valore <em>UUID v4</em> secondo [<span class="target" id="index-67"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc4122.html"><strong>RFC 4122</strong></a>].</p></td>
<td><p>[<span class="target" id="index-68"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>. Sezione 4.1.7].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>htm</strong></p></td>
<td><p>Il valore del metodo HTTP della request a cui è allegato il JWT.</p></td>
<td><p>[<span class="target" id="index-69"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9110.html"><strong>RFC 9110</strong></a>. Sezione 9.1].</p></td>
</tr>
<tr class="row-even"><td><p><strong>htu</strong></p></td>
<td><p>Target URI HTTP, senza le parti di query e fragment, della request a cui è allegato il JWT.</p></td>
<td><p>[<span class="target" id="index-70"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9110.html"><strong>RFC 9110</strong></a>. Sezione 7.1].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>iat</strong></p></td>
<td><p>Timestamp UNIX con data e orario di emissione del JWT, codificato come NumericDate come indicato nel <span class="target" id="index-71"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
<td><p>[<span class="target" id="index-72"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>. Sezione 4.1.6].</p></td>
</tr>
</tbody>
</table>
</section>
<section id="token-response">
<h4><span class="section-number">8.2.2.4.2. </span>Token Response<a class="headerlink" href="#token-response" title="Link to this heading">¶</a></h4>
<p>Se la Token Request viene validata con successo, l'Authorization Server fornisce una Token Response con <em>status code HTTP 200 (OK)</em>. La Token Response  contiene i seguenti claim.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>access_token</strong></p></td>
<td><p>OBBLIGATORIO. Il <em>DPoP-bound Access Token</em>, in formato JWT firmato, consente di accedere al Credential Endpoint per ottenere l'Attestato Elettronico.</p></td>
<td><p>[<span class="target" id="index-73"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html"><strong>RFC 6749</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>refresh_token</strong></p></td>
<td><p>OPZIONALE. Il <em>DPoP-bound Refresh Token</em>, in formato JWT firmato, che può essere utilizzato per ottenere un nuovo Access Token presso il Token Endpoint del Credential Issuer.</p></td>
<td><p>[<span class="target" id="index-74"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html"><strong>RFC 6749</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>token_type</strong></p></td>
<td><p>OBBLIGATORIO. Tipo di <em>Access Token</em> restituito. DEVE essere uguale a <code class="docutils literal notranslate"><span class="pre">DPoP</span></code>.</p></td>
<td><p>[<span class="target" id="index-75"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html"><strong>RFC 6749</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>expires_in</strong></p></td>
<td><p>OBBLIGATORIO. Tempo di scadenza dell'<em>Access Token</em> in secondi.</p></td>
<td><p>[<span class="target" id="index-76"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html"><strong>RFC 6749</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>authorization_details</strong></p></td>
<td><p>OBBLIGATORIO quando il parametro <code class="docutils literal notranslate"><span class="pre">authorization_details</span></code> viene utilizzato per richiedere l'emissione di un Attestato Elettronico. OPZIONALE quando il parametro <code class="docutils literal notranslate"><span class="pre">scope</span></code> viene utilizzato per richiedere l'emissione di un Attestato Elettronico. Array di Oggetti JSON, utilizzati per identificare gli Attestati Elettronici con gli stessi Metadata ma diversi valori di claimset/claim e/o semplificare la Credential Request anche quando viene emessa un solo Attestato Elettronico. Oltre al claim definito nella <a class="reference internal" href="#table-jwt-request"><span class="std std-ref">Tabella dei parametri della Richiesta JWT</span></a> DEVE includere il seguente claim:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>credential_identifiers</strong>: Array di stringhe, ciascuna che identifica in modo univoco un set di dati dell'Attestato Elettronico disponibile per l'emissione.</p></li>
</ul>
</div></blockquote>
</td>
<td><p>[<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
</tbody>
</table>
<p>Se si verificano errori durante la convalida della Token Request, l'Authorization Server DEVE restituire una response di errore come definito nel <span class="target" id="index-77"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>. La response DEVE utilizzare il Content-Type HTTP <em>application/json</em> e DEVE includere i seguenti parametri:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>error</em>. Il codice di errore.</p></li>
<li><p><em>error_description</em>. Testo in forma <em>human-readable</em> che fornisce ulteriori dettagli per chiarire la natura dell'errore riscontrato.</p></li>
</ul>
</div></blockquote>
<p>Di seguito è riportato un esempio non normativo di una response di errore.</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">401</span> <span class="ne">Unauthorized</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json;charset=UTF-8</span>
<span class="na">Cache-Control</span><span class="o">:</span> <span class="l">no-store</span>
<span class="na">Pragma</span><span class="o">:</span> <span class="l">no-cache</span>
</pre></div>
</div>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;invalid_client&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;error_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Client authentication failed&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Nella seguente tabella sono elencati i <em>status code HTTP</em> e i relativi codici di errore supportati per la response di errore:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Status Code</strong></p></th>
<th class="head"><p><strong>codice di errore</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_request</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta a causa di parametri mancanti, parametri non validi o richiesta malformata. (<span class="target" id="index-78"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_grant</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta perché l'<em>authorization code</em> o il <em>Refresh Token</em> fornito non è valido, è scaduto, è stato revocato o non corrisponde al <em>redirection URI</em> utilizzato nell'authorization request, o è stato rilasciato ad un altro client. (<span class="target" id="index-79"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
</tr>
<tr class="row-even"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">unsupported_grant_type</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta perché il <em>grant type</em> non è supportato. (<span class="target" id="index-80"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_dpop_proof</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta a causa di un <em>DPoP proof</em> non valido. Sezione 5 del [<span class="target" id="index-81"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9449.html"><strong>RFC 9449</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><em>401 Unauthorized</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_client</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta a causa del fallimento della <em>Client Authentication</em> (ad esempio in caso di client sconosciuto, nessun parametro relativo alla Client Authentication presente oppure se il metodo di autenticazione non è supportato). (<span class="target" id="index-82"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6749.html#section-5.2"><strong>RFC 6749#section-5.2</strong></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><em>500 Internal Server Error</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">server_error</span></code></p></td>
<td><p>Il Credential Issuer ha riscontrato un problema interno.</p></td>
</tr>
<tr class="row-even"><td><p><em>503 Service Unavailable</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">temporarily_unavailable</span></code></p></td>
<td><p>Il Credential Issuer è temporaneamente non disponibile.</p></td>
</tr>
<tr class="row-odd"><td><p><em>504 Gateway Timeout</em> [OPZIONALE]</p></td>
<td><p><cite>-</cite></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta entro l'intervallo di tempo definito.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="access-token">
<h4><span class="section-number">8.2.2.4.3. </span>Access Token<a class="headerlink" href="#access-token" title="Link to this heading">¶</a></h4>
<p>Un <em>DPoP-bound Access Token*</em> viene fornito dal Token Endpoint del Credential Issuer come risultato di una token request andata a buon fine . L'Access Token è codificato in formato JWT, secondo [<span class="target" id="index-83"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>]. L'Access Token DEVE avere almeno i seguenti claim obbligatori e DEVE essere vincolato alla chiave pubblica fornita dal <em>DPoP proof</em>. Questo vincolo può essere realizzato in base alla metodologia definita nella Sezione 6 del (<span class="target" id="index-84"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9449.html"><strong>RFC 9449</strong></a>).</p>
<p>Il <strong>JWT DPoP</strong> contiene i seguenti parametri di header JOSE e claim.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>JOSE Header</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>typ</strong></p></td>
<td><p>OBBLIGATORIO. DEVE essere uguale a <code class="docutils literal notranslate"><span class="pre">at+jwt</span></code>.</p></td>
<td><p>[<span class="target" id="index-85"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>alg</strong></p></td>
<td><p>OBBLIGATORIO. Identificativo dell'algoritmo di firma digitale come definito nel registro IANA &quot;JSON Web Signature and Encryption Algorithms&quot;. DEVE essere uno degli algoritmi supportati elencati nella Sezione <a class="reference internal" href="algorithms.html#algoritmi-crittografici"><span class="std std-ref">Algoritmi Crittografici</span></a> e NON DEVE essere valorizzato con <code class="docutils literal notranslate"><span class="pre">none</span></code> o con qualsiasi identificativo di algoritmo simmetrico (MAC).</p></td>
<td><p>[<span class="target" id="index-86"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>kid</strong></p></td>
<td><p>OBBLIGATORIO. Identificativo univoco del <code class="docutils literal notranslate"><span class="pre">jwk</span></code> utilizzato dal Credential Issuer per firmare l'Access Token.</p></td>
<td><p><span class="target" id="index-87"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7638.html#section_3"><strong>RFC 7638#section_3</strong></a>.</p></td>
</tr>
</tbody>
</table>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>OBBLIGATORIO. DEVE essere un URL HTTPS che identifica in modo univoco il Credential Issuer. L'Istanza del Wallet DEVE verificare che questo valore corrisponda al Credential Issuer a cui ha richiesto l'Attestato Elettronico.</p></td>
<td><p>[<span class="target" id="index-88"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>], [<span class="target" id="index-89"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>sub</strong></p></td>
<td><p>OBBLIGATORIO. Identifica il soggetto del JWT. DEVE essere settato con il valore del campo <code class="docutils literal notranslate"><span class="pre">sub</span></code> presente nell'Attestato ELettronico in formato SD-JWT-VC.</p></td>
<td><p>[<span class="target" id="index-90"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>], [<span class="target" id="index-91"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>] e Sezione 8 di [<a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html">OIDC</a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>client_id</strong></p></td>
<td><p>OBBLIGATORIO. L'identificativo dell'Istanza del Wallet che ha richiesto l'Access Token; DEVE essere uguale al kid della chiave pubblica dell'Istanza del Wallet specificata nell'Attestato di Unità di Wallet (<code class="docutils literal notranslate"><span class="pre">cnf.jwk</span></code>).</p></td>
<td><p>[<span class="target" id="index-92"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>], [<span class="target" id="index-93"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>] e Sezione 8 di [<a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html">OIDC</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>aud</strong></p></td>
<td><p>OBBLIGATORIO. DEVE essere valorizzato con l'identificativo del Credential Issuer.</p></td>
<td><p>[<span class="target" id="index-94"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>iat</strong></p></td>
<td><p>OBBLIGATORIO. Timestamp UNIX con data e orario di emissione del JWT, codificato come NumericDate come indicato nel <span class="target" id="index-95"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
<td><p>[<span class="target" id="index-96"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>], [<span class="target" id="index-97"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>. Sezione 4.1.6].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>exp</strong></p></td>
<td><p>OBBLIGATORIO. Timestamp UNIX con data e orario di scadenza del JWT, codificato come NumericDate come indicato nel <span class="target" id="index-98"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
<td><p>[<span class="target" id="index-99"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>], [<span class="target" id="index-100"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>jti</strong></p></td>
<td><p>OPZIONALE. DEVE essere una Stringa in formato <em>uuid4</em>. Identificativo univoco del Token ID che la RP DOVREBBE utilizzare per prevenire il riutilizzo rifiutando l'ID Token se è stato già elaborato.</p></td>
<td><p>[<span class="target" id="index-101"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>], [<span class="target" id="index-102"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>cnf</strong></p></td>
<td><p>OBBLIGATORIO. DEVE contenere un claim <strong>jkt</strong> che è un Metodo di Conferma del <em>Thumbprint JWK SHA-256</em>. Il valore del parametro <em>jkt</em> DEVE contenere la codifica base64url (come definito nel [<span class="target" id="index-103"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>]) del <em>Thumbprint JWK SHA-256</em> della chiave pubblica DPoP (in formato JWK) a cui è vincolato l'Access Token.</p></td>
<td><p>[<span class="target" id="index-104"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9449.html"><strong>RFC 9449</strong></a>. Sezione 6.1] e [<span class="target" id="index-105"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7638.html"><strong>RFC 7638</strong></a>].</p></td>
</tr>
</tbody>
</table>
</section>
<section id="refresh-token">
<h4><span class="section-number">8.2.2.4.4. </span>Refresh Token<a class="headerlink" href="#refresh-token" title="Link to this heading">¶</a></h4>
<p>Un <em>DPoP-bound Refresh Token</em> viene fornito dal Token endpoint del Credential Issuer come risultato di una token request andata a buon fine. Il Refresh Token è codificato in formato JWT, secondo [<span class="target" id="index-106"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>]. Il Refresh Token DEVE avere almeno i seguenti claim obbligatori e DEVE essere vincolato alla chiave pubblica fornita dal <em>DPoP proof</em>. Questo vincolo può essere realizzato in base alla metodologia definita nella Sezione 6 del (<span class="target" id="index-107"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9449.html"><strong>RFC 9449</strong></a>).</p>
<p>Il <strong>JWT DPoP</strong> DEVE contenere i seguenti parametri di header JOSE e claim.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>JOSE Header</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>typ</strong></p></td>
<td><p>DEVE essere uguale a <code class="docutils literal notranslate"><span class="pre">rt+jwt</span></code>.</p></td>
<td><p>[<span class="target" id="index-108"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>alg</strong></p></td>
<td><p>Identificativo dell'algoritmo di firma digitale come definito nel registro IANA &quot;JSON Web Signature and Encryption Algorithms&quot;. DEVE essere uno degli algoritmi supportati elencati nella Sezione <a class="reference internal" href="algorithms.html#algoritmi-crittografici"><span class="std std-ref">Algoritmi Crittografici</span></a> e NON DEVE essere valorizzato con <code class="docutils literal notranslate"><span class="pre">none</span></code> o con qualsiasi identificativo di algoritmo simmetrico (MAC).</p></td>
<td><p>[<span class="target" id="index-109"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>kid</strong></p></td>
<td><p>Identificativo univoco del <code class="docutils literal notranslate"><span class="pre">jwk</span></code> utilizzato dal Credential Issuer per firmare l'Access Token.</p></td>
<td><p><span class="target" id="index-110"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7638.html#section_3"><strong>RFC 7638#section_3</strong></a>.</p></td>
</tr>
</tbody>
</table>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>DEVE essere un URL HTTPS che identifica in modo univoco il Credential Issuer. L'Istanza del Wallet DEVE verificare che questo valore corrisponda al Credential Issuer a cui ha richiesto l'Attestato Elettronico.</p></td>
<td><p>[<span class="target" id="index-111"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>], [<span class="target" id="index-112"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>sub</strong></p></td>
<td><p>Identifica il soggetto del JWT. DEVE essere settato con il valore del campo <code class="docutils literal notranslate"><span class="pre">sub</span></code> presente nell'Attestato ELettronico in formato SD-JWT-VC.</p></td>
<td><p>[<span class="target" id="index-113"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>], [<span class="target" id="index-114"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>] e Sezione 8 di [<a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html">OIDC</a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>client_id</strong></p></td>
<td><p>L'identificativo per l'Istanza del Wallet che ha richiesto l'Access Token; DEVE essere uguale al valore del <cite>kid</cite> che identifica la chiave pubblica utilizzata nell'Istanza del Wallet, utilizzata nell'Attestato di Unità di Wallet (<code class="docutils literal notranslate"><span class="pre">cnf.jwk</span></code>).</p></td>
<td><p>[<span class="target" id="index-115"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>], [<span class="target" id="index-116"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>] e Sezione 8 di [<a class="reference external" href="https://openid.net/specs/openid-connect-core-1_0.html">OIDC</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>aud</strong></p></td>
<td><p>DEVE essere valorizzato con l'identificativo del Credential Issuer.</p></td>
<td><p>[<span class="target" id="index-117"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>iat</strong></p></td>
<td><p>Timestamp UNIX con data e orario di emissione del JWT, codificato come NumericDate come indicato nel <span class="target" id="index-118"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
<td><p>[<span class="target" id="index-119"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>], [<span class="target" id="index-120"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>. Sezione 4.1.6].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>nbf</strong></p></td>
<td><p>Timestamp UNIX con data e orario prima del quale il JWT NON DEVE essere accettato, codificato come NumericDate come indicato nel <span class="target" id="index-121"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>. DOVREBBE essere impostato sul claim <code class="docutils literal notranslate"><span class="pre">exp</span></code> del corrispondente Token di Accesso.</p></td>
<td><p>[<span class="target" id="index-122"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>. Sezione 4.1.7].</p></td>
</tr>
<tr class="row-even"><td><p><strong>exp</strong></p></td>
<td><p>Timestamp UNIX con data e orario di scadenza del JWT, codificato come NumericDate come indicato nel <span class="target" id="index-123"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
<td><p>[<span class="target" id="index-124"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>], [<span class="target" id="index-125"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>jti</strong></p></td>
<td><p>DEVE essere una Stringa in formato <em>uuid4</em>. Identificativo univoco del Token ID che la RP DOVREBBE utilizzare per prevenire il riutilizzo rifiutando l'ID Token se è stato già elaborato.</p></td>
<td><p>[<span class="target" id="index-126"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9068.html"><strong>RFC 9068</strong></a>], [<span class="target" id="index-127"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>cnf</strong></p></td>
<td><p>DEVE contenere un claim <strong>jkt</strong> che è un Metodo di Conferma del <em>Thumbprint JWK SHA-256</em>. Il valore del parametro <em>jkt</em> DEVE contenere la codifica base64url (come definito nel [<span class="target" id="index-128"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>]) del <em>Thumbprint JWK SHA-256</em> della chiave pubblica DPoP (in formato JWK) a cui è vincolato l'Access Token.</p></td>
<td><p>[<span class="target" id="index-129"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9449.html"><strong>RFC 9449</strong></a>. Sezione 6.1] e [<span class="target" id="index-130"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7638.html"><strong>RFC 7638</strong></a>].</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="nonce-endpoint">
<h3><span class="section-number">8.2.2.5. </span>Nonce Endpoint<a class="headerlink" href="#nonce-endpoint" title="Link to this heading">¶</a></h3>
<p>Il Nonce Endpoint fornisce un valore del <code class="docutils literal notranslate"><span class="pre">c_nonce</span></code> utile per creare una prova di possesso del materiale crittografico per la richiesta al Credential Endpoint, come definito nella Sezione 7 di <a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>.</p>
<section id="nonce-request">
<h4><span class="section-number">8.2.2.5.1. </span>Nonce Request<a class="headerlink" href="#nonce-request" title="Link to this heading">¶</a></h4>
<p>La Nonce Request DEVE essere una HTTP POST request senza body indirizzata al Nonce Endpoint del Credential Issuer censito nei Metadata del Credential Issuer.</p>
</section>
<section id="nonce-response">
<h4><span class="section-number">8.2.2.5.2. </span>Nonce Response<a class="headerlink" href="#nonce-response" title="Link to this heading">¶</a></h4>
<p>La Nonce Response DEVE essere inviata all'Istanza del Wallet utilizzando il media type <cite>application/json</cite>. In caso di Nonce Request andata a buon fine, il Credential Issuer DEVE restituire una HTTP response con <em>status code HTTP 200 (OK)</em>.</p>
<p>Come definito nella Sezione 7.2 di <a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>, il Credential Issuer DEVE rendere la risposta non memorizzabile nella cache aggiungendo il campo di header <code class="docutils literal notranslate"><span class="pre">Cache-Control</span></code> valorizzato con <em>no-store</em>.</p>
<p>La Nonce Response contiene il seguente parametro:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>c_nonce</strong></p></td>
<td><p>OBBLIGATORIO. Stringa contenente il valore del nonce. Questo valore DEVE essere imprevedibile.</p></td>
<td><p>Sezione 7.2 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="credential-endpoint">
<h3><span class="section-number">8.2.2.6. </span>Credential Endpoint<a class="headerlink" href="#credential-endpoint" title="Link to this heading">¶</a></h3>
<p>Il Credential Endpoint emette un'Attestato Eletronico previa presentazione di un Access Token valido, come definito in <a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>.</p>
<section id="credential-request">
<h4><span class="section-number">8.2.2.6.1. </span>Credential Request<a class="headerlink" href="#credential-request" title="Link to this heading">¶</a></h4>
<p>L'Istanza del Wallet quando richiede l'Attestato Elettronico al Credential Endpoint, DEVE utilizzare i seguenti parametri nel body del messaggio della HTTP POST request, utilizzando il tipo di media <cite>application/json</cite>.</p>
<p>Il Credential Endpoint DEVE accettare e convalidare il <em>DPoP proof</em> inviato nel parametro di header HTTP <em>DPoP</em>, secondo i passaggi definiti nella Sezione 4.3 del (<span class="target" id="index-131"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9449.html"><strong>RFC 9449</strong></a>). Il <em>DPoP proof</em> oltre ai valori definiti nella sezione Token Endpoint DEVE contenere il seguente claim:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>ath</strong>: valore di hash dell'Access Token codificato in ASCII. Il valore DEVE utilizzare la codifica base64url (come definito nella Sezione 2 del (<span class="target" id="index-132"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>) con l'algoritmo SHA-256.</p></li>
</ul>
</div></blockquote>
<div class="admonition warning">
<p class="admonition-title">Avvertimento</p>
<p>L'Istanza del Wallet DEVE creare un <strong>nuovo DPoP proof</strong> per la Credential Request e NON DEVE utilizzare la <em>proof</em> precedentemente creata per il Token Endpoint.</p>
</div>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>credential_identifier</strong></p></td>
<td><p>OBBLIGATORIO quando Authorization Details di tipo <em>openid_credential</em> è stato restituito dalla Token. In tutti gli altri casi NON DEVE essere utilizzato. Questo DEVE essere valorizzato con uno dei valori ottenuti nel claim <code class="docutils literal notranslate"><span class="pre">credential_identifiers</span></code> della Token Response. NON DEVE essere utilizzato se è presente <code class="docutils literal notranslate"><span class="pre">credential_configuration_id</span></code>.</p></td>
<td><p>Sezione 8.2 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>credential_configuration_id</strong></p></td>
<td><p>OBBLIGATORIO se il parametro <code class="docutils literal notranslate"><span class="pre">credential_identifiers</span></code> è assente nella Token Response.  In tutti gli altri casi NON DEVE essere utilizzato. Stringa che specifica un identificativo univoco dell'Attestato ELetronico descritto nel claim <cite>credential_configurations_supported</cite> presente nei Metadata del Credential Issuer. Ad esempio, nel caso del PID, può essere valorizzato con <code class="docutils literal notranslate"><span class="pre">PersonIdentificationData</span></code>.</p></td>
<td><p>Sezione 8.2 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>proof</strong></p></td>
<td><p>OBBLIGATORIO. Oggetto JSON contenente la prova di possesso del materiale crittografico a cui sarà vincolato l'Attestato Elettronico emesso. L'oggetto proof DEVE contenere i seguenti claim obbligatori:</p>
<ul class="simple">
<li><p><strong>proof_type</strong>: stringa JSON che denota il tipo di prova in termini di formato. DEVE essere <cite>jwt</cite>.</p></li>
<li><p><strong>jwt</strong>: il JWT utilizzato come prova di possesso.</p></li>
</ul>
</td>
<td><p>[<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>transaction_id</strong></p></td>
<td><p>OBBLIGATORIO solo in caso di Deferred Flow. Stringa che identifica una transazione di emissione posticipata. NON DEVE essere presente nel flusso di emissione immediato.</p></td>
<td><p>Sezione 9.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
</tbody>
</table>
<p>Il <em>proof type</em> del JWT DEVE contenere i seguenti parametri per l'header JOSE e il body in JWT:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>JOSE Header</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>alg</strong></p></td>
<td><p>Identificativo dell'algoritmo di firma digitale come definito nel registro IANA &quot;JSON Web Signature and Encryption Algorithms&quot;. DEVE essere uno degli algoritmi supportati elencati nella Sezione <a class="reference internal" href="algorithms.html#algoritmi-crittografici"><span class="std std-ref">Algoritmi Crittografici</span></a> e NON DEVE essere valorizzato con <code class="docutils literal notranslate"><span class="pre">none</span></code> o con qualsiasi identificativo di algoritmo simmetrico (MAC).</p></td>
<td><p>[<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>], [<span class="target" id="index-133"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>], [<span class="target" id="index-134"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7517.html"><strong>RFC 7517</strong></a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>typ</strong></p></td>
<td><p>DEVE essere valorizzato con <cite>openid4vci-proof+jwt</cite>.</p></td>
<td><p>[<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>], [<span class="target" id="index-135"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>], [<span class="target" id="index-136"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7517.html"><strong>RFC 7517</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>jwk</strong></p></td>
<td><p>Rappresenta la chiave pubblica scelta dall'Istanza del Wallet, in formato JSON Web Key (JWK) [<span class="target" id="index-137"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7517.html"><strong>RFC 7517</strong></a>] a cui l'Attestato Elettronico sarà vincolato, come definito nella Sezione 4.1.3 del [<span class="target" id="index-138"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>].</p></td>
<td><p>[<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>], [<span class="target" id="index-139"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a>], [<span class="target" id="index-140"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7517.html"><strong>RFC 7517</strong></a>].</p></td>
</tr>
</tbody>
</table>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>Il valore di questo claim DEVE essere il <strong>client_id</strong> dell'Istanza del Wallet.</p></td>
<td><p>[<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>], [<span class="target" id="index-141"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>, Sezione 4.1.1].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>aud</strong></p></td>
<td><p>DEVE essere valorizzato con l'identificativo del Credential Issuer.</p></td>
<td><p>[<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>iat</strong></p></td>
<td><p>Timestamp UNIX con data e orario  di emissione del JWT, codificato come NumericDate come indicato nel <span class="target" id="index-142"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
<td><p>[<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>], [<span class="target" id="index-143"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>. Sezione 4.1.6].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>nonce</strong></p></td>
<td><p>Il tipo di valore di questo claim DEVE essere una stringa, dove il valore è un <strong>c_nonce</strong> fornito dal Credential Issuer tramite la Nonce Response.</p></td>
<td><p>[<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
</tbody>
</table>
</section>
<section id="credential-response">
<h4><span class="section-number">8.2.2.6.2. </span>Credential Response<a class="headerlink" href="#credential-response" title="Link to this heading">¶</a></h4>
<p>La Credential Response DEVE essere inviata all'Istanza del Wallet utilizzando il media type <cite>application/json</cite>. Se la Credential Request viene validata con successo e l'Attestato Elettronico è immediatamente disponibile, il Credential Issuer DEVE restituire una HTTP response con un <em>status code HTTP 200 (OK)</em>. Se l'Attestato Elettronico non è disponibile e il Deferred Flow è supportato dal Credential Issuer, allora DEVE essere restituito un <em>status code HTTP 202</em>.</p>
<p>La Credential Response contiene i seguenti parametri:</p>
<table class="longtable docutils align-default" id="table-credential-response-claim">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>credentials</strong></p></td>
<td><p>OBBLIGATORIO se <code class="docutils literal notranslate"><span class="pre">lead_time</span></code> e <code class="docutils literal notranslate"><span class="pre">transaction_id</span></code> non sono presenti, altrimenti NON DEVE essere presente. Contiene i seguenti parametri:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>credential</strong>: OBBLIGATORIO. Stringa contenente un Attestato Elettronico emesso. Se l'identificativo del formato richiesto è <code class="docutils literal notranslate"><span class="pre">dc+sd-jwt</span></code> allora il parametro <code class="docutils literal notranslate"><span class="pre">credential</span></code> NON DEVE essere ricodificato. Se l'identificativo di formato richiesto è <code class="docutils literal notranslate"><span class="pre">mso_mdoc</span></code> allora il parametro <code class="docutils literal notranslate"><span class="pre">credential</span></code> DEVE essere una rappresentazione codificata in base64url della struttura IssuerSigned codificata in CBOR, come definito in [ISO 18013-5]. Questa struttura DOVREBBE contenere tutti i Namespaces e IssuerSignedItems inclusi negli AuthorizedNamespaces del MobileSecurityObject.</p></li>
</ul>
</div></blockquote>
</td>
<td><p>Sezione 8.3, Allegato A2.4 e Allegato A3.4 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>lead_time</strong></p></td>
<td><p>OBBLIGATORIO se <code class="docutils literal notranslate"><span class="pre">credentials</span></code> non è presente, altrimenti NON DEVE essere presente. La quantità di tempo (espressa in secondi) richiesta prima di effettuare una Deferred Credential Request.</p></td>
<td><p>Questa Specifica.</p></td>
</tr>
<tr class="row-even"><td><p><strong>notification_id</strong></p></td>
<td><p>OPZIONALE. Stringa che identifica un'Attestato Elettronico emesso che il Wallet include nella Notification Request come definito nella Sezione <a class="reference internal" href="credential-issuance-endpoint.html#notification-request"><span class="std std-ref">Notification Request</span></a>. NON DEVE essere presente se il parametro <code class="docutils literal notranslate"><span class="pre">credentials</span></code> non è presente.</p></td>
<td><p>Sezione 8.3 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>transaction_id</strong></p></td>
<td><p>OBBLIGATORIO se <code class="docutils literal notranslate"><span class="pre">credentials</span></code> non è presente, altrimenti NON DEVE essere presente. Stringa che identifica una transazione di emissione posticipata che il Wallet include nella successiva Credential Request come definito nella Sezione <a class="reference internal" href="credential-issuance-endpoint.html#deferred-endpoint"><span class="std std-ref">Deferred Endpoint</span></a>. DEVE essere invalidato dopo che l'Utente ottiene l'Attestato Elettronico.</p></td>
<td><p>Sezione 8.3 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
</tbody>
</table>
<p>Nel caso in cui la Credential Request non contenga un Access Token valido, il Credential Endpoint restituisce una response di errore come definito nella Sezione 3 del [<span class="target" id="index-144"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6750.html"><strong>RFC 6750</strong></a>].
Se si verifica qualsiasi altro errore, il Credential Issuer DEVE restituire una response di errore come definito nella Sezione 8.3.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>]. La response DEVE utilizzare il content type <em>application/json</em> e DEVE includere i seguenti parametri:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>error</em>. Il codice di errore.</p></li>
<li><p><em>error_description</em>. Testo in forma <em>human-readable</em> che fornisce ulteriori dettagli per chiarire la natura dell'errore riscontrato.</p></li>
</ul>
</div></blockquote>
<p>Di seguito è riportato un esempio non normativo di una response di errore.</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">400</span> <span class="ne">Bad Request</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Cache-Control</span><span class="o">:</span> <span class="l">no-store</span>
</pre></div>
</div>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;invalid_proof&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;error_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The proof field is not present or the provided key proof is invalid or not bound to a nonce provided by the Credential Issuer.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Nella seguente tabella sono elencati i <em>Status Code HTTP</em> e i relativi codici di errore supportati per la response di errore:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Status Code</strong></p></th>
<th class="head"><p><strong>codice di errore</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_credential_request</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta a causa di parametri mancanti, parametri non validi o richiesta malformata. Sezione 8.3.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">unsupported_credential_type</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta perché il tipo di Attestato Elettronico richiesto non è supportato. Sezione 8.3.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-even"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">unsupported_credential_format</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta perché il Formato dell'Attestato Elettronico richiesto non è supportato. Sezione 8.3.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_proof</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta perché il parametro <code class="docutils literal notranslate"><span class="pre">proof</span></code> nella Credential Request non è valido o è assente. Sezione 8.3.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-even"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_nonce</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta perché il parametro <code class="docutils literal notranslate"><span class="pre">proof</span></code> nella Credential Request utilizza un nonce non valido. Sezione 8.3.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_encryption_parameters</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta perché i parametri di crittografia nella Credential Request non sono validi o mancanti. Sezione 8.3.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-even"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">credential_request_denied</span></code></p></td>
<td><p>La Credential Request non è stata accettata dal Credential Issuer. Sezione 8.3.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">issuance_pending</span></code></p></td>
<td><p>Solo in caso di Deferred Flow. Il Credential Issuer non può soddisfare la richiesta perché l'Attestato Elettronico non è ancora disponibile per l'emissione. Sezione 9.3 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-even"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_transaction_id</span></code></p></td>
<td><p>Solo in caso di Deferred Flow. Il Credential Issuer non può soddisfare la richiesta perché la Credential Request contiene un <code class="docutils literal notranslate"><span class="pre">transaction_id</span></code> non valido. Sezione 9.3 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_dpop_proof</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta a causa del <em>DPoP proof</em> non valido. Sezione 7 del [<span class="target" id="index-145"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9449.html"><strong>RFC 9449</strong></a>].</p></td>
</tr>
<tr class="row-even"><td><p><em>500 Internal Server Error</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">server_error</span></code></p></td>
<td><p>Il Credential Issuer ha riscontrato un problema interno.</p></td>
</tr>
<tr class="row-odd"><td><p><em>503 Service Unavailable</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">temporarily_unavailable</span></code></p></td>
<td><p>Il Credential Issuer è temporaneamente non disponibile.</p></td>
</tr>
<tr class="row-even"><td><p><em>504 Gateway Timeout</em> [OPZIONALE]</p></td>
<td><p><cite>-</cite></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta entro l'intervallo di tempo definito.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="deferred-endpoint">
<h3><span class="section-number">8.2.2.7. </span>Deferred Endpoint<a class="headerlink" href="#deferred-endpoint" title="Link to this heading">¶</a></h3>
<p>I Credential Issuer POSSONO supportare il <em>Deferred Endpoint</em> con l'obiettivo di soddisfare i casi in cui un'emissione immediata potrebbe non essere possibile, a causa di errori durante la comunicazione tra il Credential Issuer e la Fonte Autentica (ad esempio la Fonte Autentica è temporaneamente non disponibile, ecc.) o a causa di processi amministrativi o tecnici da espletare.</p>
<p>Nel caso in cui la Fonte Autentica e il Credential Issuer siano entrambi abilitati a utilizzare <em>PDND</em>, si DEVE seguire quanto descritto nella Sezione <a class="reference internal" href="authentic-sources.html#fonti-autentiche"><span class="std std-ref">Fonti Autentiche</span></a>.</p>
<p>Si applicano i seguenti requisiti:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>La Deferred Credential Request PUÒ avvenire anche diversi giorni dopo l'iniziale Credenziale Request.</p></li>
<li><p>L'Utente DEVE essere informato che l'Attestato Elettronico è disponibile e pronto per essere emesso.</p></li>
<li><p>Il Fornitore di Wallet NON DEVE essere informato su quale Attestato Elettronico è disponibile per l'emissione o quale Credential Issuer l'Utente deve contattare.</p></li>
<li><p>L'Istanza del Wallet DEVE essere informata sulla quantità di tempo da attendere prima di effettuare una nuova Credential Request.</p></li>
<li><p>Poiché, in generale, un'indisponibilità può essere un evento imprevisto, il Credential Issuer DEVE essere in grado di passare al volo tra un flusso <em>immediato</em> e uno <em>posticipato</em>. Questa decisione DEVE essere presa dopo la fase autorizzativa.</p></li>
</ol>
</div></blockquote>
<p>Se i Credential Issuer, che supportano questo flusso, non sono in grado di emettere immediatamente un Attestato ELettronico richiesto, DEVONO fornire all'Istanza del Wallet una Credential Response HTTP contenente la quantità di tempo da attendere prima di effettuare una nuova Credential Request e un identificativo della transazione di emissione posticipata (<em>transaction_id</em>). Lo <em>status code HTTP</em> previsto DEVE essere il <em>202</em> (vedi Sezione 15.3.3 del [<span class="target" id="index-146"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9110.html"><strong>RFC 9110</strong></a>]). Di seguito viene fornito un esempio non normativo.</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Cache-Control</span><span class="o">:</span> <span class="l">no-store</span>
</pre></div>
</div>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;transaction_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8xLOxBtZp8&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;lead_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">864000</span>
<span class="p">}</span>
</pre></div>
</div>
<p>L'Istanza del Wallet DEVE utilizzare il valore fornito nel parametro <em>lead_time</em> per informare l'Utente quando l'Attestato Elettronico diventa disponibile (ad esempio utilizzando una notifica locale innescata dal valore di tempo <em>lead_time</em>). I Credential Issuer POSSONO inviare una notifica all'Utente tramite un canale di comunicazione (ad esempio indirizzo email), se precedentemente fornito dall'Utente al Credential Issuer.</p>
<section id="deferred-request">
<h4><span class="section-number">8.2.2.7.1. </span>Deferred Request<a class="headerlink" href="#deferred-request" title="Link to this heading">¶</a></h4>
<p>Una volta ricevuta la notifica (dall'Istanza del Wallet e/o dal Credential Issuer), l'Utente accede all'Istanza del Wallet.</p>
<p>L'Istanza del Wallet DEVE presentare al Deferred Endpoint un Access Token valido per l'emissione dell'Attestato Elettronico precedentemente richiesto al Credential Endpoint.</p>
<p>Se il valore del parametro <code class="docutils literal notranslate"><span class="pre">lead_time</span></code> risulta inferiore rispetto alla scadenza dell'Access Token, l'Istanza del Wallet DOVREBBE utilizzare l'Access Token. Altrimenti, l'Istanza del Wallet PUÒ ottenere un nuovo Access Token seguendo il flusso relativo al Refresh Token (vedi Sezione <a class="reference internal" href="credential-issuance-low-level.html#refresh-token-flow"><span class="std std-ref">Refresh Token Flow</span></a> per maggiori dettagli). Se il flusso del Refresh Token fallisce, l'Istanza del Wallet deve inviare una nuova authentication request.</p>
<p>La Deferred Credential Request DEVE essere una HTTP POST request. DEVE essere inviata utilizzando il media type <code class="docutils literal notranslate"><span class="pre">application/json</span></code>.
Il seguente parametro viene utilizzato nella Deferred Credential Request:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">transaction_id</span></code>: OBBLIGATORIO. Stringa che identifica una transazione di Emissione posticipata.</p></li>
</ul>
</div></blockquote>
<p>Il Credential Issuer DEVE invalidare il <code class="docutils literal notranslate"><span class="pre">transaction_id</span></code> dopo che l'Attestato Elettronico per cui era destinato è stata ottenuto dall'Istanza del Wallet.
Di seguito è riportato un esempio non normativo di una Deferred Credential Request:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">credential</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Host</span><span class="p">:</span> <span class="n">eaa</span><span class="o">-</span><span class="n">provider</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">application</span><span class="o">/</span><span class="n">json</span>
<span class="n">Authorization</span><span class="p">:</span> <span class="n">DPoP</span> <span class="n">Kz</span><span class="o">~</span><span class="mi">8</span><span class="n">mXK1EalYznwH</span><span class="o">-</span><span class="n">LC</span><span class="o">-</span><span class="mi">1</span><span class="n">fBAo</span><span class="mf">.4</span><span class="n">Ljp</span><span class="o">~</span><span class="n">zsPE_NeO</span><span class="o">.</span><span class="n">gxU</span>
<span class="n">DPoP</span><span class="p">:</span> <span class="n">eyJ0eXAiOiJkcG9wK2p3dCIsImFsZyI6IkVTMjU2IiwiandrIjp7Imt0eSI6Ik</span>
    <span class="n">VDIiwieCI6Imw4dEZyaHgtMzR0VjNoUklDUkRZOXpDa0RscEJoRjQyVVFVZldWQVdCR</span>
    <span class="n">nMiLCJ5IjoiOVZFNGpmX09rX282NHpiVFRsY3VOSmFqSG10NnY5VERWclUwQ2R2R</span>
    <span class="mi">1</span><span class="n">JEQSIsImNydiI6IlAtMjU2In19</span><span class="o">.</span><span class="n">eyJqdGkiOiJlMWozVl9iS2ljOC1MQUVCIiwiaHRtIj</span>
    <span class="n">oiR0VUIiwiaHR1IjoiaHR0cHM6Ly9yZXNvdXJjZS5leGFtcGxlLm9yZy9wcm90ZWN0Z</span>
    <span class="n">WRyZXNvdXJjZSIsImlhdCI6MTU2MjI2MjYxOCwiYXRoIjoiZlVIeU8ycjJaM0RaNTNF</span>
    <span class="n">c05yV0JiMHhXWG9hTnk1OUlpS0NBcWtzbVFFbyJ9</span><span class="mf">.2</span><span class="n">oW9RP35yRqzhrtNP86L</span><span class="o">-</span><span class="n">Ey71E</span>
    <span class="n">OptxRimPPToA1plemAgR6pxHF8y6</span><span class="o">-</span><span class="n">yqyVnmcw6Fy1dqd</span><span class="o">-</span><span class="n">jfxSYoMxhAJpLjA</span>


<span class="p">{</span>
  <span class="s2">&quot;transaction_id&quot;</span><span class="p">:</span> <span class="s2">&quot;8xLOxBtZp8&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="deferred-response">
<h4><span class="section-number">8.2.2.7.2. </span>Deferred Response<a class="headerlink" href="#deferred-response" title="Link to this heading">¶</a></h4>
<p>La Deferred Credential Response DEVE essere inviata utilizzando il media type <cite>application/json`</cite>. Se l'Attestato Elettronico è disponibile, la Deferred Credential Response DEVE utilizzare i parametri <code class="docutils literal notranslate"><span class="pre">credentials</span></code> e <code class="docutils literal notranslate"><span class="pre">notification_id</span></code> come definito nella Sezione <a class="reference internal" href="credential-issuance-endpoint.html#credential-response"><span class="std std-ref">Credential Response</span></a>. Se la Deferred Credential Request non è valida o l'Attestato Elettronico non è disponibile, la Deferred Credential Error Response DEVE essere inviata all'Istanza del Wallet secondo quanto indicato nella Sezione 9.3 di <a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>.</p>
</section>
</section>
<section id="notification-endpoint">
<h3><span class="section-number">8.2.2.8. </span>Notification Endpoint<a class="headerlink" href="#notification-endpoint" title="Link to this heading">¶</a></h3>
<p>Il Notification Endpoint viene utilizzato dal Wallet per notificare al Credential Issuer determinati eventi relativi agli Attestati Elettronici emessi, come ad esempio se l'Attestato Elettronico è stato memorizzato con successo nell'Istanza del Wallet.</p>
<p>Per salvaguardare la privacy, l'<code class="docutils literal notranslate"><span class="pre">event_description</span></code> nella notifica NON DOVREBBE contenere alcuna informazione che potrebbe rivelare il comportamento dell'Utente o rivelare lo stato del dispositivo personale (ad esempio, se lo spazio di archiviazione è pieno).</p>
<p>Questo endpoint DEVE essere protetto utilizzando un Access Token di tipo DPoP. Il protocollo TLS per la riservatezza del trasporto su HTTP è OBBLIGATORIO secondo la Sezione 10 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p>
<section id="notification-request">
<h4><span class="section-number">8.2.2.8.1. </span>Notification Request<a class="headerlink" href="#notification-request" title="Link to this heading">¶</a></h4>
<p>La Notification Request DEVE essere una HTTP POST utilizzando il media type <em>application/json</em> con i seguenti parametri.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 19.0%" />
<col style="width: 57.1%" />
<col style="width: 23.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>notification_id</strong></p></td>
<td><p>OBBLIGATORIO. DEVE essere uguale al valore <code class="docutils literal notranslate"><span class="pre">notification_id</span></code> restituito nella Credential Response dal Credential Issuer.</p></td>
<td><p>Sezione 10.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><strong>event</strong></p></td>
<td><p>OBBLIGATORIO. Tipo dell'evento da notificare. DEVE essere una stringa case-sensitive e DEVE supportare i seguenti valori:</p>
<ul class="simple">
<li><p><em>credential_accepted</em>: quando l'Attestato ELettronico è stato memorizzato con successo nell'Istanza del Wallet.</p></li>
<li><p><em>credential_deleted</em>: quando l'emissione non riuscita dell'Attestato Elettronico è stata causata da un'azione dell'utente.</p></li>
<li><p><em>credential_failure</em>: in tutti gli altri casi di insuccesso.</p></li>
</ul>
</td>
<td><p>Sezione 10.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-even"><td><p><strong>event_description</strong></p></td>
<td><p>OPZIONALE. Testo ASCII <em>human-readable</em> [USASCII] che fornisce informazioni aggiuntive, da utilizzare per informare in merito all'evento verificatosi. I valori per il parametro event_description NON DEVONO includere caratteri al di fuori dell'insieme <em>%x20-21 / %x23-5B / %x5D-7E</em>.</p></td>
<td><p>Sezione 10.1 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
</tbody>
</table>
</section>
<section id="notification-response">
<h4><span class="section-number">8.2.2.8.2. </span>Notification Response<a class="headerlink" href="#notification-response" title="Link to this heading">¶</a></h4>
<p>La Notification Response DEVE utilizzare un <em>status code HTTP 204 (No Content)</em>, come raccomandato nella Sezione 10.2 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p>
<p>In caso di errori, si DEVE seguire quanto descritto nella Sezione 10.3 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p>
<p>Nel caso in cui la Notification Request non contenga un Access Token valido, il Notification Endpoint restituisce una response di errore come definito nella Sezione 3 del [<span class="target" id="index-147"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6750.html"><strong>RFC 6750</strong></a>].
Se si verifica qualsiasi altro errore, il Credential Issuer DEVE restituire una response di errore come definito nella Sezione 10.3 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>]. La response DEVE utilizzare il content type <em>application/json</em> e DEVE includere i seguenti parametri:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>error</em>. Il codice di errore.</p></li>
<li><p><em>error_description</em>. Testo in forma <em>human-readable</em> che fornisce ulteriori dettagli per chiarire la natura dell'errore riscontrato.</p></li>
</ul>
</div></blockquote>
<p>Di seguito è riportato un esempio non normativo di una response di errore.</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">400</span> <span class="ne">Bad Request</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Cache-Control</span><span class="o">:</span> <span class="l">no-store</span>
</pre></div>
</div>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;invalid_notification_id&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;error_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The notification_id field is not valid&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Nella seguente tabella sono elencati i <em>Status Code HTTP</em> e i relativi codici di errore supportati per la response di errore:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Codice di Stato</strong></p></th>
<th class="head"><p><strong>codice di errore</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_notification_id</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta a causa del parametro <code class="docutils literal notranslate"><span class="pre">notification_id</span></code> non valido. Sezione 10.3 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-odd"><td><p><em>400 Bad Request</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_notification_request</span></code></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta a causa di parametri mancanti, parametro non valido o richiesta malformata. Sezione 10.3 di [<a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>].</p></td>
</tr>
<tr class="row-even"><td><p><em>500 Internal Server Error</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">server_error</span></code></p></td>
<td><p>Il Credential Issuer ha riscontrato un problema interno.</p></td>
</tr>
<tr class="row-odd"><td><p><em>503 Service Unavailable</em> [OBBLIGATORIO]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">temporarily_unavailable</span></code></p></td>
<td><p>Il Credential Issuer è temporaneamente non disponibile.</p></td>
</tr>
<tr class="row-even"><td><p><em>504 Gateway Timeout</em> [OPZIONALE]</p></td>
<td><p><cite>-</cite></p></td>
<td><p>Il Credential Issuer non può soddisfare la richiesta entro l'intervallo di tempo definito.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="catalogo-e-service-pdnd-del-credential-issuer">
<h2><span class="section-number">8.2.3. </span>Catalogo e-Service PDND del Credential Issuer<a class="headerlink" href="#catalogo-e-service-pdnd-del-credential-issuer" title="Link to this heading">¶</a></h2>
<p>I Credential Issuer DEVONO fornire i seguenti e-service attraverso PDND per:</p>
<blockquote>
<div><ul class="simple">
<li><p>gestire le notifiche relative alla disponibilità dei dati e gli aggiornamenti degli attributi provenienti da una Fonte Autentica;</p></li>
<li><p>revocare gli Attestati Elettronici emessi per un'Istanza del Wallet revocata</p></li>
<li><p>fornire statistiche sugli Attestati Elettronici emessi</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>La specifica OpenAPI completa è disponibile <span class="raw-html"><a href="OAS3-PDND-Issuer.html" target="_blank">qui</a></span>.</p>
</div>
<section id="notify-available-credential">
<h3><span class="section-number">8.2.3.1. </span>Notify Available Credential<a class="headerlink" href="#notify-available-credential" title="Link to this heading">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><strong>Descrizione</strong></p></th>
<td><p>Questo servizio informa gli Utenti quando uno specifico Attestato Elettronico è
disponibile per essere inserito nel Wallet</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><strong>Fornitore</strong></p></th>
<td><p>Fornitore di Attestato Elettronico</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><strong>Consumatore</strong></p></th>
<td><p>Fonte Autentica</p></td>
</tr>
</tbody>
</table>
</section>
<section id="notify-update-credential">
<h3><span class="section-number">8.2.3.2. </span>Notify Update Credential<a class="headerlink" href="#notify-update-credential" title="Link to this heading">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><strong>Descrizione</strong></p></th>
<td><p>Il servizio è progettato per ricevere dalla Fonte Autentica (AS), tramite PDND,
la notifica di un cambiamento di stato e/o valore di un attributo specifico (es. MDL)
a cui è associato un documento digitale emesso dal Fornitore di Attestato Elettronico.</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><strong>Fornitore</strong></p></th>
<td><p>Fornitore di Attestato Elettronico</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><strong>Consumatore</strong></p></th>
<td><p>Fonte Autentica</p></td>
</tr>
</tbody>
</table>
</section>
<section id="notify-wallet-instance-revocation">
<h3><span class="section-number">8.2.3.3. </span>Notify Wallet Instance Revocation<a class="headerlink" href="#notify-wallet-instance-revocation" title="Link to this heading">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><strong>Descrizione</strong></p></th>
<td><p>Questo servizio revoca tutti gli Attestati Elettronici associati a uno specifico Utente.</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><strong>Fornitore</strong></p></th>
<td><p>Fornitore di Attestato Elettronico</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><strong>Consumatore</strong></p></th>
<td><p>Fornitore di Wallet</p></td>
</tr>
</tbody>
</table>
</section>
<section id="get-statistics">
<h3><span class="section-number">8.2.3.4. </span>Get Statistics<a class="headerlink" href="#get-statistics" title="Link to this heading">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><strong>Descrizione</strong></p></th>
<td><p>Questo servizio restituisce dati statistici sugli Attestati Elettronici emessi.</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><strong>Fornitore</strong></p></th>
<td><p>Fornitore di Attestati Elettronici</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><strong>Consumatore</strong></p></th>
<td><p>Terza Parte Autorizzata</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
    
        <div id="show_right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&lt;</span><span>Page contents</span></a></p>
        </div>

        <div id="right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&gt;</span><span>Page contents:</span></a></p>
            <div class="page_toc">
                <ul>
<li><a class="reference internal" href="#">8.2. Endpoint del Credential Issuer</a><ul>
<li><a class="reference internal" href="#endpoint-di-federazione">8.2.1. Endpoint di Federazione</a></li>
<li><a class="reference internal" href="#endpoint-relativi-all-emissione-delgli-attestati-elettronici">8.2.2. Endpoint relativi all'Emissione delgli Attestati Elettronici</a><ul>
<li><a class="reference internal" href="#credential-offer-endpoint">8.2.2.1. Credential Offer Endpoint</a><ul>
<li><a class="reference internal" href="#credential-offer">8.2.2.1.1. Credential Offer</a></li>
<li><a class="reference internal" href="#credential-offer-response">8.2.2.1.2. Credential Offer Response</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pushed-authorization-request-endpoint">8.2.2.2. Pushed Authorization Request Endpoint</a><ul>
<li><a class="reference internal" href="#pushed-authorization-request-par-request">8.2.2.2.1. Pushed Authorization Request (PAR) Request</a></li>
<li><a class="reference internal" href="#pushed-authorization-request-par-response">8.2.2.2.2. Pushed Authorization Request (PAR) Response</a></li>
</ul>
</li>
<li><a class="reference internal" href="#authorization-endpoint">8.2.2.3. Authorization endpoint</a><ul>
<li><a class="reference internal" href="#authorization-request">8.2.2.3.1. Authorization Request</a></li>
<li><a class="reference internal" href="#authorization-response">8.2.2.3.2. Authorization Response</a></li>
</ul>
</li>
<li><a class="reference internal" href="#token-endpoint">8.2.2.4. Token Endpoint</a><ul>
<li><a class="reference internal" href="#token-request">8.2.2.4.1. Token Request</a></li>
<li><a class="reference internal" href="#token-response">8.2.2.4.2. Token Response</a></li>
<li><a class="reference internal" href="#access-token">8.2.2.4.3. Access Token</a></li>
<li><a class="reference internal" href="#refresh-token">8.2.2.4.4. Refresh Token</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nonce-endpoint">8.2.2.5. Nonce Endpoint</a><ul>
<li><a class="reference internal" href="#nonce-request">8.2.2.5.1. Nonce Request</a></li>
<li><a class="reference internal" href="#nonce-response">8.2.2.5.2. Nonce Response</a></li>
</ul>
</li>
<li><a class="reference internal" href="#credential-endpoint">8.2.2.6. Credential Endpoint</a><ul>
<li><a class="reference internal" href="#credential-request">8.2.2.6.1. Credential Request</a></li>
<li><a class="reference internal" href="#credential-response">8.2.2.6.2. Credential Response</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deferred-endpoint">8.2.2.7. Deferred Endpoint</a><ul>
<li><a class="reference internal" href="#deferred-request">8.2.2.7.1. Deferred Request</a></li>
<li><a class="reference internal" href="#deferred-response">8.2.2.7.2. Deferred Response</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notification-endpoint">8.2.2.8. Notification Endpoint</a><ul>
<li><a class="reference internal" href="#notification-request">8.2.2.8.1. Notification Request</a></li>
<li><a class="reference internal" href="#notification-response">8.2.2.8.2. Notification Response</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#catalogo-e-service-pdnd-del-credential-issuer">8.2.3. Catalogo e-Service PDND del Credential Issuer</a><ul>
<li><a class="reference internal" href="#notify-available-credential">8.2.3.1. Notify Available Credential</a></li>
<li><a class="reference internal" href="#notify-update-credential">8.2.3.2. Notify Update Credential</a></li>
<li><a class="reference internal" href="#notify-wallet-instance-revocation">8.2.3.3. Notify Wallet Instance Revocation</a></li>
<li><a class="reference internal" href="#get-statistics">8.2.3.4. Get Statistics</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
        </div>
    

      <div class="clearer"></div>
    </div>
    <div class="button_nav_wrapper">
        <div class="button_nav">
            <div class="left">
                
                <a href="wallet-provider-endpoint.html">
                    <span class="icon">&lt;</span><span><span class="section-number">8.1. </span>Endpoint del Fornitore di Wallet</span></a>
                
            </div>

            <div class="right">
                
                    <a href="relying-party-endpoint.html"><span><span class="section-number">8.3. </span>Endpoint della Relying Party</span><span class="icon">&gt;</span></a>
                
            </div>
        </div>
    </div>


    <div class="footer" role="contentinfo">
      Ultimo aggiornamento 30/05/2025.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.5.
    </div>

<p id="theme_credit"></p>
  </body>
</html>