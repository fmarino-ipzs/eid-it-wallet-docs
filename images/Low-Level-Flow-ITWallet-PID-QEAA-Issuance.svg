<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1364px" preserveAspectRatio="none" style="width:1484px;height:1364px;background:#FFFFFF;" version="1.1" viewBox="0 0 1484 1364" width="1484px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="1352.0469" style="stroke:#181818;stroke-width:0.5;" width="436.3169" x="95.9102" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138.0107" x="245.0632" y="18.0669">User's smartphone</text><rect fill="#FFFFFF" fill-opacity="0.00000" height="98.2031" style="stroke:#000000;stroke-width:1.5;" width="1336.1885" x="9" y="358.8906"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="387.5313" style="stroke:#000000;stroke-width:1.5;" width="1419.8994" x="9" y="919.2188"/><g><title>User</title><rect fill="#FFFFFF" fill-opacity="0.00000" height="1267.3203" width="8" x="62.9551" y="56.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="66" x2="66" y1="56.4297" y2="1323.75"/></g><g><title>Browser</title><rect fill="#FFFFFF" fill-opacity="0.00000" height="1267.3203" width="8" x="131.4297" y="56.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="134.9102" x2="134.9102" y1="56.4297" y2="1323.75"/></g><g><title>Wallet Instance</title><rect fill="#FFFFFF" fill-opacity="0.00000" height="1267.3203" width="8" x="463.0762" y="56.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="466.9253" x2="466.9253" y1="56.4297" y2="1323.75"/></g><g><title>PID/(Q)EAA Provider</title><rect fill="#FFFFFF" fill-opacity="0.00000" height="1267.3203" width="8" x="1283.8604" y="56.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1287.5322" x2="1287.5322" y1="56.4297" y2="1323.75"/></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45.9102" x="44" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="51" y="45.1279">User</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45.9102" x="44" y="1322.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="51" y="1342.7451">User</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.0391" x="99.9102" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.0391" x="106.9102" y="45.1279">Browser</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.0391" x="99.9102" y="1322.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.0391" x="106.9102" y="1342.7451">Browser</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.3018" x="405.9253" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.3018" x="412.9253" y="45.1279">Wallet Instance</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.3018" x="405.9253" y="1322.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.3018" x="412.9253" y="1342.7451">Wallet Instance</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154.6563" x="1210.5322" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140.6563" x="1217.5322" y="45.1279">PID/(Q)EAA Provider</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154.6563" x="1210.5322" y="1322.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140.6563" x="1217.5322" y="1342.7451">PID/(Q)EAA Provider</text></g><rect fill="#90EE90" height="23" style="stroke:#181818;stroke-width:0.5;" width="954" x="400" y="71.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="496.8374" x="628.7129" y="87.4966">Check PID/(Q)EAA Provider is part of the Federation and obtain its metadata</text><g><line style="stroke:#181818;stroke-width:1;" x1="467.0762" x2="509.0762" y1="120.6953" y2="120.6953"/><line style="stroke:#181818;stroke-width:1;" x1="509.0762" x2="509.0762" y1="120.6953" y2="133.6953"/><line style="stroke:#181818;stroke-width:1;" x1="468.0762" x2="509.0762" y1="133.6953" y2="133.6953"/><polygon fill="#181818" points="478.0762,129.6953,468.0762,133.6953,478.0762,137.6953,474.0762,133.6953" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="474.0762" y="115.6294">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251.7607" x="487.1216" y="115.6294">create PKCE code verifier and WIA-PoP</text></g><g><polygon fill="#181818" points="1275.8604,204.2266,1285.8604,208.2266,1275.8604,212.2266,1279.8604,208.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="467.0762" x2="1281.8604" y1="208.2266" y2="208.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="474.0762" y="180.4614">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.4917" x="487.1216" y="157.7622">PAR Request (</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.2017" x="495.3862" y="172.895">client_id,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.7739" x="495.3862" y="188.0278">request)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="504.7593" x="495.3862" y="203.1606">with OAuth-Client-Attestation and OAuth-Client-Attestation-PoP in the Header</text></g><rect fill="#90EE90" height="38" style="stroke:#181818;stroke-width:0.5;" width="381" x="1097" y="221.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304.9414" x="1101" y="237.2935">Check Wallet Provider is part of the Federation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="368.875" x="1101" y="252.4263">Check signature of the Wallet Attestation and its validity</text><g><polygon fill="#181818" points="478.0762,281.625,468.0762,285.625,478.0762,289.625,474.0762,285.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="472.0762" x2="1286.8604" y1="285.625" y2="285.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="484.0762" y="280.5591">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="254.8774" x="497.1216" y="280.5591">PAR Response (request_uri, expires_in)</text></g><g><polygon fill="#181818" points="146.4297,310.7578,136.4297,314.7578,146.4297,318.7578,142.4297,314.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="140.4297" x2="466.0762" y1="314.7578" y2="314.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="152.4297" y="309.6919">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="294.6011" x="165.4751" y="309.6919">Authorization Request (client_id, request_uri)</text></g><g><polygon fill="#181818" points="1275.8604,339.8906,1285.8604,343.8906,1275.8604,347.8906,1279.8604,343.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="135.4297" x2="1281.8604" y1="343.8906" y2="343.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="142.4297" y="338.8247">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="294.6011" x="155.4751" y="338.8247">Authorization Request (client_id, request_uri)</text></g><path d="M9,358.8906 L73.4429,358.8906 L73.4429,366.0234 L63.4429,376.0234 L9,376.0234 L9,358.8906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="98.2031" style="stroke:#000000;stroke-width:1.5;" width="1336.1885" x="9" y="358.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="24" y="371.9575">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="121.7788" x="88.4429" y="371.1011">[Credential == PID]</text><rect fill="#FFFFFF" height="23" style="stroke:#181818;stroke-width:0.5;" width="1316" x="19" y="381.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="705.4658" x="324.3613" y="397.0903">user authentication with national eIDAS notified schemes and consent (optionally collecting user's contacts)</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="9" x2="1345.1885" y1="410.1563" y2="410.1563"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="149.4668" x="14" y="420.3667">[Credential == (Q)EAA)]</text><rect fill="#FFFFFF" height="23" style="stroke:#181818;stroke-width:0.5;" width="1316" x="19" y="428.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="516.147" x="419.0208" y="445.0278">user authentication with PID and consent (optionally collecting user's contacts)</text><g><polygon fill="#181818" points="146.4297,481.2266,136.4297,485.2266,146.4297,489.2266,142.4297,485.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="140.4297" x2="1286.8604" y1="485.2266" y2="485.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="152.4297" y="480.1606">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266.4683" x="165.4751" y="480.1606">Authorization Response (code, state, iss)</text></g><g><polygon fill="#181818" points="455.0762,510.3594,465.0762,514.3594,455.0762,518.3594,459.0762,514.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="135.4297" x2="461.0762" y1="514.3594" y2="514.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="142.4297" y="509.2935">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266.4683" x="155.4751" y="509.2935">Authorization Response (code, state, iss)</text></g><g><line style="stroke:#181818;stroke-width:1;" x1="467.0762" x2="509.0762" y1="543.4922" y2="543.4922"/><line style="stroke:#181818;stroke-width:1;" x1="509.0762" x2="509.0762" y1="543.4922" y2="556.4922"/><line style="stroke:#181818;stroke-width:1;" x1="468.0762" x2="509.0762" y1="556.4922" y2="556.4922"/><polygon fill="#181818" points="478.0762,552.4922,468.0762,556.4922,478.0762,560.4922,474.0762,556.4922" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="474.0762" y="538.4263">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.0205" x="487.1216" y="538.4263">generate DPoP key</text></g><g><line style="stroke:#181818;stroke-width:1;" x1="467.0762" x2="509.0762" y1="585.625" y2="585.625"/><line style="stroke:#181818;stroke-width:1;" x1="509.0762" x2="509.0762" y1="585.625" y2="598.625"/><line style="stroke:#181818;stroke-width:1;" x1="468.0762" x2="509.0762" y1="598.625" y2="598.625"/><polygon fill="#181818" points="478.0762,594.625,468.0762,598.625,478.0762,602.625,474.0762,598.625" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="474.0762" y="580.5591">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="480.981" x="487.1216" y="580.5591">generate DPoP proof and WIA-PoP for PID/(Q)EAA Provider token endpoint</text></g><g><polygon fill="#181818" points="1275.8604,699.4219,1285.8604,703.4219,1275.8604,707.4219,1279.8604,703.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="467.0762" x2="1281.8604" y1="703.4219" y2="703.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="474.0762" y="660.5239">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214.0874" x="496.167" y="622.6919">Token Request with DPoP proof (</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.5723" x="504.4316" y="637.8247">grant_type,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35.4834" x="504.4316" y="652.9575">code,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.1626" x="504.4316" y="668.0903">code_verifier,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.5615" x="504.4316" y="683.2231">redirect_uri)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="504.7593" x="500.2993" y="698.356">with OAuth-Client-Attestation and OAuth-Client-Attestation-PoP in the Header</text></g><g><polygon fill="#181818" points="478.0762,728.5547,468.0762,732.5547,478.0762,736.5547,474.0762,732.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="472.0762" x2="1286.8604" y1="732.5547" y2="732.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="484.0762" y="727.4888">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="460.9731" x="506.167" y="727.4888">Token Response (access_token, refresh_token, token_type, expires_in)</text></g><g><polygon fill="#181818" points="1275.8604,757.6875,1285.8604,761.6875,1275.8604,765.6875,1279.8604,761.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="467.0762" x2="1281.8604" y1="761.6875" y2="761.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="474.0762" y="756.6216">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222.7012" x="496.167" y="756.6216">Nonce Request HTTP POST /nonce</text></g><g><polygon fill="#181818" points="478.0762,786.8203,468.0762,790.8203,478.0762,794.8203,474.0762,790.8203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="472.0762" x2="1286.8604" y1="790.8203" y2="790.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="484.0762" y="785.7544">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.7158" x="506.167" y="785.7544">Nonce Response (c_nonce)</text></g><g><line style="stroke:#181818;stroke-width:1;" x1="467.0762" x2="509.0762" y1="819.9531" y2="819.9531"/><line style="stroke:#181818;stroke-width:1;" x1="509.0762" x2="509.0762" y1="819.9531" y2="832.9531"/><line style="stroke:#181818;stroke-width:1;" x1="468.0762" x2="509.0762" y1="832.9531" y2="832.9531"/><polygon fill="#181818" points="478.0762,828.9531,468.0762,832.9531,478.0762,836.9531,474.0762,832.9531" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="474.0762" y="814.8872">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239.1606" x="496.167" y="814.8872">create proof of possession (c_nonce)</text></g><g><line style="stroke:#181818;stroke-width:1;" x1="467.0762" x2="509.0762" y1="862.0859" y2="862.0859"/><line style="stroke:#181818;stroke-width:1;" x1="509.0762" x2="509.0762" y1="862.0859" y2="875.0859"/><line style="stroke:#181818;stroke-width:1;" x1="468.0762" x2="509.0762" y1="875.0859" y2="875.0859"/><polygon fill="#181818" points="478.0762,871.0859,468.0762,875.0859,478.0762,879.0859,474.0762,875.0859" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="474.0762" y="857.02">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="405.4629" x="496.167" y="857.02">create DPoP proof for PID/(Q)EAA Provider credential endpoint</text></g><g><polygon fill="#181818" points="1275.8604,900.2188,1285.8604,904.2188,1275.8604,908.2188,1279.8604,904.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="467.0762" x2="1281.8604" y1="904.2188" y2="904.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="474.0762" y="899.1528">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="774.6934" x="496.167" y="899.1528">Credential Request with DPoP access_token and DPoP proof (credential_identifier or credential_configuration_id, proof)</text></g><path d="M9,919.2188 L73.4429,919.2188 L73.4429,926.3516 L63.4429,936.3516 L9,936.3516 L9,919.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" fill-opacity="0.00000" height="387.5313" style="stroke:#000000;stroke-width:1.5;" width="1419.8994" x="9" y="919.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="24" y="932.2856">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="148.4624" x="88.4429" y="931.4292">[Credential is available]</text><g><polygon fill="#181818" points="478.0762,953.4844,468.0762,957.4844,478.0762,961.4844,474.0762,957.4844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="472.0762" x2="1286.8604" y1="957.4844" y2="957.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="484.0762" y="952.4185">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320.3979" x="506.167" y="952.4185">Credential Response (credentials, notification_id)</text></g><g><line style="stroke:#181818;stroke-width:1;" x1="467.0762" x2="509.0762" y1="986.6172" y2="986.6172"/><line style="stroke:#181818;stroke-width:1;" x1="509.0762" x2="509.0762" y1="986.6172" y2="999.6172"/><line style="stroke:#181818;stroke-width:1;" x1="468.0762" x2="509.0762" y1="999.6172" y2="999.6172"/><polygon fill="#181818" points="478.0762,995.6172,468.0762,999.6172,478.0762,1003.6172,474.0762,999.6172" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="474.0762" y="981.5513">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238.9702" x="496.167" y="981.5513">PID/(Q)EAA validity and status check</text></g><g><polygon fill="#181818" points="77.9551,1024.75,67.9551,1028.75,77.9551,1032.75,73.9551,1028.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="71.9551" x2="466.0762" y1="1028.75" y2="1028.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="83.9551" y="1023.6841">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.6182" x="106.0459" y="1023.6841">ask for User consent</text></g><g><polygon fill="#181818" points="455.0762,1053.8828,465.0762,1057.8828,455.0762,1061.8828,459.0762,1057.8828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="66.9551" x2="461.0762" y1="1057.8828" y2="1057.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="73.9551" y="1052.8169">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.7954" x="96.0459" y="1052.8169">consent to store the credential</text></g><g><line style="stroke:#181818;stroke-width:1;" x1="467.0762" x2="509.0762" y1="1087.0156" y2="1087.0156"/><line style="stroke:#181818;stroke-width:1;" x1="509.0762" x2="509.0762" y1="1087.0156" y2="1100.0156"/><line style="stroke:#181818;stroke-width:1;" x1="468.0762" x2="509.0762" y1="1100.0156" y2="1100.0156"/><polygon fill="#181818" points="478.0762,1096.0156,468.0762,1100.0156,478.0762,1104.0156,474.0762,1100.0156" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="474.0762" y="1081.9497">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.5654" x="496.167" y="1081.9497">store credential</text></g><g><polygon fill="#181818" points="1275.8604,1140.2813,1285.8604,1144.2813,1275.8604,1148.2813,1279.8604,1144.2813" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="467.0762" x2="1281.8604" y1="1144.2813" y2="1144.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="474.0762" y="1131.6489">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="440.7939" x="496.167" y="1124.0825">Notification Request HTTP POST /notification (notification_id, event)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.0122" x="500.2993" y="1139.2153">with DPoP Access Token</text></g><rect fill="#ADD8E6" height="38" style="stroke:#181818;stroke-width:0.5;" width="263" x="1155" y="1157.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.2544" x="1159" y="1173.3481">Register all the credential-related</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247.6348" x="1159" y="1188.481">information for verification/revocation</text><g><polygon fill="#181818" points="478.0762,1217.6797,468.0762,1221.6797,478.0762,1225.6797,474.0762,1221.6797" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="472.0762" x2="1286.8604" y1="1221.6797" y2="1221.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="484.0762" y="1216.6138">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285.9619" x="506.167" y="1216.6138">Notification Response HTTP 204 No Content</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="9" x2="1428.8994" y1="1230.6797" y2="1230.6797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="178.3525" x="14" y="1240.8901">[Credential is NOT available]</text><g><polygon fill="#181818" points="478.0762,1261.6172,468.0762,1265.6172,478.0762,1269.6172,474.0762,1265.6172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="472.0762" x2="1286.8604" y1="1265.6172" y2="1265.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="484.0762" y="1260.5513">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312.3872" x="506.167" y="1260.5513">Credential Response (lead_time, transaction_id)</text></g><rect fill="#FEFFDD" height="23" style="stroke:#181818;stroke-width:0.5;" width="1316" x="19" y="1278.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="796.4595" x="278.8645" y="1294.6841">The Wallet Instance, after an amount of time specified by lead_time and when triggered by the User, starts the flow again</text><!--SRC=[hLPjRo8t4FxkNp7AVIX8e5HLFvrqbGYX5zHJGdESygNIokmEYvN5tle5ZlxwZkrzyG9H6xKI4kpEZ6VccMSUmvrLqkqtg1chkROY5pMN5cw-6TGtm0qunZRgUtpnWm6p9wzwfoJUm8SlejpPkyhXCFPEgsCNpeUs5rvLQ64fZUKon-1pP2WBe2ndDQoMzxUZtyUBsGnMMXr4qPmf6DDIMGHrG0t7YQ1AbfyVrf-V5uj7DjzX_WfNOa4OyEU3seBT8VoAz99ReIHmogysbWi9mXhOe-K5jzpN5J8nTeJfBt24Zv1hv9HwzTjy0Rag4AW6iHLql3_aPJcRhjIgyHValvezmpF-wT1O6FqX0V9AeBIPA2R-IKVJ6Fp3KTWTFCsStKtdmMiwivQiVP5l6NrIeEfzNm_8gR4Keci0DOFu5-0q0KQKabkdiNLfJZWlqGDuu9KeX3r1WY0JC6qmZ9YOMac3C6eWo9mM4y3ljT1eCY77BA188Ov_1D-tqkAlcAS3j0SJacF6pF4GATuTo7XbOQwfUsa5h-3J9q-b0PWJ1nzU7fRh1NF6ZvqIUESyPWWpbE4tXUFoVlOLADXJf02Jxt2F9k2K- -w9vYDLH-VgHEy8qjmAMOAB-qPUbkVMZ7iaiIBKXYL6fe_VMoPrzXzBaKKxLqBy4knsn7vH9k1PGb_2c6v0ntS5zLjOelJqHBZtn7_5qvksMYlYQxARi5NwgZnOzOeIgALQ2MbPiiFhO6cv4w1BpWvRNMgIhCoUQWnh7MflVsIjH3GRNn33yyWtl_R_wzRxQKGOsg9RE7cUep5PwDAJVajhjciVmrSiVxY27GQFYkIwm-1XlLx1wkdh6cwbDoHvMyTkZ5dm65zgQ8IFFhKoXchpxGxSp_mJpD-QOTwlHJ_8heTaQIw7cU8JK4z7t9zBak5_1CLNQSACzcChIXTLCoXB2BxK599QVk2YufiAWING3UhhyEjUcacZ97cR8WKrWQEJNz-6vugZxVKYthWxSkVcDQ3ex_LM09Zh46yKmIgALwJvdc9z9KdQQBumHShqnLvdJc8VdRL6F3pGYVs6X77Cmf0YjzcrA-xkoxS5UyPI6Ej5hwhEAfzgh8XB1J0XgVrzJEw1Y4iQyzzgFAYciFGEIqW-QAsPLUZjfnz_9ZFCIIqzf1ToJTD_V5ht3FY7yLUqrvaLUrfCInfZI87RsIVjkubWw_vERlzUJO1l0mx4wBroCbxlT1YO6lDu9srEqEK8X3dIFK6vH5cYZdOFeUT9K6DDzxj_iQtK4NX9_va6zy7V]--></g></svg>