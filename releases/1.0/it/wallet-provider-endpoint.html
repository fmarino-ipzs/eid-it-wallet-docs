<!DOCTYPE html>

<html lang="it" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>8.1. Endpoint del Fornitore di Wallet &#8212; IT-Wallet Technical Documentation - Release 1.0 - 1.0.0</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/basic_mod.css?v=9b2032db" />
    <link rel="stylesheet" type="text/css" href="_static/itwallet-override.css?v=63798874" />
    <script src="_static/documentation_options.js?v=3fd72285"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/translations.js?v=da26b4cc"></script>
    <script src="_static/js/theme.js"></script>
    <script src="_static/js/petite-vue.js"></script>
    <link rel="icon" href="https://avatars.githubusercontent.com/u/15377824?s=48&amp;v=4"/>
    <link rel="index" title="Indice" href="genindex.html" />
    <link rel="search" title="Cerca" href="search.html" />
    <link rel="next" title="8.2. Endpoint del Credential Issuer" href="credential-issuer-endpoint.html" />
    <link rel="prev" title="8. Endpoints" href="endpoints.html" /> 
  </head><body data-dark_mode_code_blocks="true">

<div id="top_nav">
    

    <nav>
        
            
        

        <p id="toggle_sidebar">
            <a href="#" title="Toggle sidebar">|||</a>
        </p>
        <h1><a href="index.html" title="Go to homepage">IT-Wallet Technical Documentation - Release 1.0 - 1.0.0</a></h1>
            <a id="source_link" href="https://github.com/italia/eudi-wallet-it-docs">
    
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">
            <path fill="white" d="M 244.8,8 C 106.1,8 0,113.3 0,252 c 0,110.9 69.8,205.8 169.5,239.2 12.8,2.3 17.3,-5.6 17.3,-12.1 0,-6.2 -0.3,-40.4 -0.3,-61.4 0,0 -70,15 -84.7,-29.8 0,0 -11.4,-29.1 -27.8,-36.6 0,0 -22.9,-15.7 1.6,-15.4 0,0 24.9,2 38.6,25.8 21.9,38.6 58.6,27.5 72.9,20.9 2.3,-16 8.8,-27.1 16,-33.7 -55.9,-6.2 -112.3,-14.3 -112.3,-110.5 0,-27.5 7.6,-41.3 23.6,-58.9 -2.6,-6.5 -11.1,-33.3 2.6,-67.9 20.9,-6.5 69,27 69,27 20,-5.6 41.5,-8.5 62.8,-8.5 21.3,0 42.8,2.9 62.8,8.5 0,0 48.1,-33.6 69,-27 13.7,34.7 5.2,61.4 2.6,67.9 16,17.7 25.8,31.5 25.8,58.9 0,96.5 -58.9,104.2 -114.8,110.5 9.2,7.9 17,22.9 17,46.4 0,33.7 -0.3,75.4 -0.3,83.6 0,6.5 4.6,14.4 17.3,12.1 C 428.2,457.8 496,362.9 496,252 496,113.3 383.5,8 244.8,8 Z"/>
        </svg>
    
</a>
        

        <a id="mode_toggle" href="#" @click.prevent="handleClick" :title="mode">
    <template v-if="mode == 'light'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_light"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M67.48,18.073c1.913,-1.912 1.913,-5.018 0,-6.931c-1.912,-1.912 -5.018,-1.912 -6.931,0l-6.798,6.799c-1.912,1.912 -1.912,5.018 0,6.931c1.913,1.912 5.018,1.912 6.931,-0l6.798,-6.799Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.728,61.108c1.912,-1.913 1.912,-5.018 -0,-6.931c-1.913,-1.913 -5.019,-1.913 -6.931,-0l-6.799,6.798c-1.912,1.913 -1.912,5.019 0,6.931c1.913,1.913 5.019,1.913 6.931,0l6.799,-6.798Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.682,54.177c-1.913,-1.913 -5.018,-1.913 -6.931,-0c-1.912,1.913 -1.912,5.018 0,6.931l6.798,6.798c1.913,1.913 5.019,1.913 6.931,0c1.913,-1.912 1.913,-5.018 0,-6.931l-6.798,-6.798Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M4.901,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,-0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M18.929,11.142c-1.912,-1.912 -5.018,-1.912 -6.931,0c-1.912,1.913 -1.912,5.019 0,6.931l6.799,6.799c1.912,1.912 5.018,1.912 6.931,-0c1.912,-1.913 1.912,-5.019 -0,-6.931l-6.799,-6.799Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.108,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c-0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c-0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'dark'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_dark"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.901,2.196 -4.901,4.901c0,2.705 2.197,4.901 4.901,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.662,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.989,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.732,61.103c1.91,-1.91 1.91,-5.011 0,-6.921l-0.009,-0.01c-1.91,-1.91 -5.012,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.909,1.91 5.011,1.91 6.92,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.672,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.52,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l-0,-0.01c-0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.901,2.196 -4.901,4.901c0,2.704 2.197,4.9 4.901,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.73,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 -0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.098,34.623c-2.699,0 -4.891,2.192 -4.891,4.892l-0,0.019c-0,2.699 2.192,4.891 4.891,4.891c2.7,0 4.892,-2.192 4.892,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.892,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'darkest'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_darkest"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><path d="M39.315,23.791c8.684,-0 15.734,7.05 15.734,15.733c0,8.684 -7.05,15.734 -15.734,15.734c-8.683,0 -15.733,-7.05 -15.733,-15.734c-0,-8.683 7.05,-15.733 15.733,-15.733Zm0,4.737c6.069,0 10.997,4.927 10.997,10.996c-0,6.069 -4.928,10.996 -10.997,10.996c-6.068,0 -10.996,-4.927 -10.996,-10.996c0,-6.069 4.928,-10.996 10.996,-10.996Z" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.216,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.9,2.196 -4.9,4.901c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.666,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.99,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.737,61.103c1.909,-1.91 1.909,-5.011 -0,-6.921l-0.01,-0.01c-1.91,-1.91 -5.011,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.91,1.91 5.011,1.91 6.921,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.676,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.524,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l0,-0.01c0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.216,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901c-0,2.704 2.196,4.9 4.9,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.734,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.103,34.623c-2.7,0 -4.892,2.192 -4.892,4.892l-0,0.019c-0,2.699 2.192,4.891 4.892,4.891c2.699,0 4.891,-2.192 4.891,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.891,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>
</a>

<script>
(function() {
    const LOCAL_STORAGE_KEY = 'piccoloThemeMode'

    var initialMode = localStorage.getItem(LOCAL_STORAGE_KEY)

    if (initialMode) {
        // Make sure the value in local storage is valid
        if (['light', 'dark', 'darkest'].indexOf(initialMode) == -1) {
            initialMode = 'light'
            localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
        }
    } else {
        // Check if the client prefers dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            initialMode = 'dark'
        } else {
            initialMode = 'light'
        }
        localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
    }

    document.documentElement.dataset.mode = initialMode

    PetiteVue.createApp({
        'mode': initialMode,
        handleClick() {
            let currentMode = this.mode

            if (currentMode == 'light') {
                this.mode = 'dark'
            } else if (currentMode == 'dark') {
                this.mode = 'darkest'
            } else if (currentMode == 'darkest') {
                this.mode = 'light'
            }

            document.documentElement.dataset.mode = this.mode
            localStorage.setItem(LOCAL_STORAGE_KEY, this.mode)

            console.log(this.mode)
        }
    }).mount('#mode_toggle')
})()
</script>
            <p class="mobile_search_link">
                <a href="search.html" title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 64" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
                        <path d="M14.873 40.009c-2.315-3.943-3.642-8.532-3.642-13.429C11.231 11.91 23.141 0 37.811 0s26.58 11.91 26.58 26.58-11.91 26.58-26.58 26.58a26.44 26.44 0 0 1-14.277-4.161L9.739 62.794a3.12 3.12 0 0 1-4.413 0L.913 58.382c-1.217-1.218-1.217-3.196 0-4.413l13.96-13.96zM37.811 8.054c10.225 0 18.526 8.301 18.526 18.526s-8.301 18.526-18.526 18.526-18.526-8.301-18.526-18.526S27.586 8.054 37.811 8.054z" fill="#fff" />
                    </svg>
                </a>
            </p>
        

        <div class="searchbox_wrapper">
            
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Ricerca veloce</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Vai" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
    </nav>
</div>

    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><p class="caption" role="heading"><span class="caption-text">Indice dei Contenuti</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduzione</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">2. Principi di design</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture-overview.html">3. Panoramica dell'Architettura</a></li>
<li class="toctree-l1"><a class="reference internal" href="trust.html">4. L'Infrastruttura di Trust</a></li>
<li class="toctree-l1"><a class="reference internal" href="entities.html">5. Entità</a></li>
<li class="toctree-l1"><a class="reference internal" href="digital-credential-management.html">6. Gestione degli Attestati Elettronici</a></li>
<li class="toctree-l1"><a class="reference internal" href="digital-credential-flows.html">7. Flussi relativi agli Attestati Elettronici</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="endpoints.html">8. Endpoints</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">8.1. Endpoint del Fornitore di Wallet</a></li>
<li class="toctree-l2"><a class="reference internal" href="credential-issuer-endpoint.html">8.2. Endpoint del Credential Issuer</a></li>
<li class="toctree-l2"><a class="reference internal" href="relying-party-endpoint.html">8.3. Endpoint della Relying Party</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentic-source-endpoint.html">8.4. Endpoint delle Fonti Autentiche</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">9. Algoritmi Crittografici</a></li>
<li class="toctree-l1"><a class="reference internal" href="security-privacy-considerations.html">10. Considerazioni di Sicurezza e Privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="log-retention-policy.html">11. Politiche Generali di Conservazione dei Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="defined-terms-and-references.html">12. Termini Definiti e Riferimenti</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">13. Come contribuire</a></li>
<li class="toctree-l1"><a class="reference internal" href="open-source.html">14. Rilasci Open Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">15. Appendice</a></li>
</ul>

        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="endpoint-del-fornitore-di-wallet">
<h1><span class="section-number">8.1. </span>Endpoint del Fornitore di Wallet<a class="headerlink" href="#endpoint-del-fornitore-di-wallet" title="Link to this heading">¶</a></h1>
<p>Il Fornitore di Wallet, responsabile della fornitura di una Soluzione Wallet, DEVE esporre gli endpoint per supportare l'instaurazione della fiducia e le funzionalità essenziali dell'Istanza di Wallet. Questi includono l'endpoint di Federazione <code class="docutils literal notranslate"><span class="pre">/.well-known/openid-federation</span></code> che DEVE aderire alla specifica OpenID Federation 1.0 per stabilire in modo affidabile la fiducia con il Fornitore di Wallet, nonché endpoint per la registrazione dell'Istanza di Wallet, la generazione di nonce (richiesta per la registrazione), l'emissione di attestati e la revoca. A parte l'endpoint di Federazione, i dettagli di implementazione degli altri sono lasciati alla discrezione del Fornitore di Wallet.</p>
<section id="endpoint-di-federazione">
<h2><span class="section-number">8.1.1. </span>Endpoint di Federazione<a class="headerlink" href="#endpoint-di-federazione" title="Link to this heading">¶</a></h2>
<p>L'endpoint <code class="docutils literal notranslate"><span class="pre">/.well-known/openid-federation</span></code> serve come meccanismo di discovery per l'instaurazione della fiducia recuperando la Entity Configuration del Fornitore di Wallet.</p>
<p>Vedere la Sezione <a class="reference internal" href="wallet-provider-entity-configuration.html#entity-configuration-del-fornitore-di-wallet"><span class="std std-ref">Entity Configuration del Fornitore di Wallet</span></a> per i dettagli tecnici.</p>
</section>
<section id="endpoint-nonce-della-soluzione-wallet">
<h2><span class="section-number">8.1.2. </span>Endpoint Nonce della Soluzione Wallet<a class="headerlink" href="#endpoint-nonce-della-soluzione-wallet" title="Link to this heading">¶</a></h2>
<p>Questo è un endpoint API RESTful che consente all'Istanza di Wallet di richiedere un nonce crittografico dal Fornitore di Wallet. Il nonce serve come sfida imprevedibile, monouso per garantire la freschezza e prevenire attacchi di replay.</p>
<p>Vedere <a class="reference internal" href="mobile-application-instance.html#richiesta-di-nonce-dell-applicazione-mobile"><span class="std std-ref">Richiesta di Nonce dell'Applicazione Mobile</span></a> e <a class="reference internal" href="mobile-application-instance.html#risposta-di-nonce-dell-applicazione-mobile"><span class="std std-ref">Risposta di Nonce dell'Applicazione Mobile</span></a> per i dettagli sulla Richiesta di Nonce e sulla Risposta di Nonce.</p>
</section>
<section id="endpoint-di-gestione-dell-istanza-di-wallet">
<h2><span class="section-number">8.1.3. </span>Endpoint di Gestione dell'Istanza di Wallet<a class="headerlink" href="#endpoint-di-gestione-dell-istanza-di-wallet" title="Link to this heading">¶</a></h2>
<p>Questo è un endpoint API RESTful fornito dal Fornitore di Wallet che consente la gestione dell'Istanza di Wallet, inclusa la registrazione, il recupero dello stato, la revoca su richiesta (ad esempio, da parte dell'Utente) e l'eliminazione.
Le seguenti sezioni descrivono le richieste di registrazione, recupero dello stato e revoca, insieme alle relative risposte, gestite da questo endpoint, che sono necessarie per le funzionalità di base dell'<a class="reference internal" href="wallet-instance-functionalities.html#funzionalita-dell-istanza-del-wallet"><span class="std std-ref">Funzionalità dell'Istanza del Wallet</span></a>.</p>
<section id="richiesta-di-registrazione-dell-istanza-di-wallet">
<h3><span class="section-number">8.1.3.1. </span>Richiesta di Registrazione dell'Istanza di Wallet<a class="headerlink" href="#richiesta-di-registrazione-dell-istanza-di-wallet" title="Link to this heading">¶</a></h3>
<p>Per registrare un'Istanza di Wallet, la richiesta al Fornitore di Wallet DEVE utilizzare il metodo HTTP POST con <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> impostato su <cite>application/json</cite>. Il corpo della richiesta DEVE contenere i claim descritti in <a class="reference internal" href="mobile-application-instance.html#richiesta-di-inizializzazione-dell-istanza-dell-applicazione-mobile"><span class="std std-ref">Richiesta di Inizializzazione dell'Istanza dell'Applicazione Mobile</span></a>.</p>
</section>
<section id="risposta-alla-registrazione-dell-istanza-di-wallet">
<h3><span class="section-number">8.1.3.2. </span>Risposta alla Registrazione dell'Istanza di Wallet<a class="headerlink" href="#risposta-alla-registrazione-dell-istanza-di-wallet" title="Link to this heading">¶</a></h3>
<p>Se una Richiesta di Registrazione dell'Istanza di Wallet viene convalidata con successo, il Fornitore di Wallet fornisce una Risposta HTTP con codice di stato 204 (No Content). Per i dettagli vedere <a class="reference internal" href="mobile-application-instance.html#risposta-di-inizializzazione-dell-istanza-dell-applicazione-mobile"><span class="std std-ref">Risposta di Inizializzazione dell'Istanza dell'Applicazione Mobile</span></a>.</p>
</section>
<section id="richiesta-di-recupero-dell-istanza-di-wallet">
<h3><span class="section-number">8.1.3.3. </span>Richiesta di Recupero dell'Istanza di Wallet<a class="headerlink" href="#richiesta-di-recupero-dell-istanza-di-wallet" title="Link to this heading">¶</a></h3>
<p>Per recuperare tutte le Istanze di Wallet associate a un Utente, una richiesta DEVE essere inviata utilizzando il metodo HTTP GET al Fornitore di Wallet.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Per recuperare una specifica Istanza di Wallet, la richiesta DEVE includere l'ID dell'Istanza di Wallet come parametro di percorso.</p>
</div>
</section>
<section id="risposta-al-recupero-dell-istanza-di-wallet">
<h3><span class="section-number">8.1.3.4. </span>Risposta al Recupero dell'Istanza di Wallet<a class="headerlink" href="#risposta-al-recupero-dell-istanza-di-wallet" title="Link to this heading">¶</a></h3>
<p>Se una Richiesta di Recupero dell'Istanza di Wallet viene elaborata con successo, il Fornitore di Wallet DEVE restituire una Risposta HTTP con un codice di stato 200 (OK).
Il corpo della risposta DEVE essere in formato JSON e includere le informazioni rilevanti dell'Istanza di Wallet, come il suo ID univoco, lo stato e la data di emissione.
Quando si recuperano tutte le Istanze di Wallet, la risposta DEVE restituire un array contenente i dettagli di tutte le istanze associate.</p>
<p>Se si verificano errori durante il processo di recupero, DEVE essere restituita una risposta di errore. Fare riferimento a <a class="reference internal" href="#gestione-degli-errori-per-la-gestione-dell-istanza-di-wallet"><span class="std std-ref">Gestione degli Errori per la Gestione dell'Istanza di Wallet</span></a> per i dettagli sui codici di errore e le descrizioni.</p>
<p>Di seguito è riportato un esempio non normativo di una risposta di errore:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Cache-Control</span><span class="o">:</span> <span class="l">no-store</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;forbidden&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;error_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;User is not authorized to retrieve Wallet Instances.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="richiesta-di-revoca-dell-istanza-di-wallet">
<h3><span class="section-number">8.1.3.5. </span>Richiesta di Revoca dell'Istanza di Wallet<a class="headerlink" href="#richiesta-di-revoca-dell-istanza-di-wallet" title="Link to this heading">¶</a></h3>
<p>Per revocare un'Istanza di Wallet attiva, una richiesta di revoca DEVE essere inviata utilizzando il metodo HTTP PATCH con Content-Type impostato su <code class="docutils literal notranslate"><span class="pre">application/json</span></code>. Il corpo della richiesta DEVE contenere un parametro <code class="docutils literal notranslate"><span class="pre">status</span></code> impostato su <code class="docutils literal notranslate"><span class="pre">REVOKED</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Mentre PATCH è il metodo consigliato, la richiesta di revoca PUÒ anche essere inviata utilizzando il metodo POST, a seconda delle preferenze di implementazione.</p>
</div>
</section>
<section id="risposta-alla-revoca-dell-istanza-di-wallet">
<h3><span class="section-number">8.1.3.6. </span>Risposta alla Revoca dell'Istanza di Wallet<a class="headerlink" href="#risposta-alla-revoca-dell-istanza-di-wallet" title="Link to this heading">¶</a></h3>
<p>Se una Richiesta di Revoca dell'Istanza di Wallet viene elaborata con successo, il Fornitore di Wallet fornisce una Risposta HTTP con un codice di stato 204 (No Content).</p>
<p>Se si verificano errori durante la Revoca dell'Istanza di Wallet, DEVE essere restituita una risposta di errore. Fare riferimento a <a class="reference internal" href="#gestione-degli-errori-per-la-gestione-dell-istanza-di-wallet"><span class="std std-ref">Gestione degli Errori per la Gestione dell'Istanza di Wallet</span></a> per i dettagli sui codici di errore e le descrizioni.</p>
<p>Di seguito è riportato un esempio non normativo di una risposta di errore:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">400</span> <span class="ne">Bad Request</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Cache-Control</span><span class="o">:</span> <span class="l">no-store</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bad_request&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;error_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The request is missing status parameter.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="gestione-degli-errori-per-la-gestione-dell-istanza-di-wallet">
<h3><span class="section-number">8.1.3.7. </span>Gestione degli Errori per la Gestione dell'Istanza di Wallet<a class="headerlink" href="#gestione-degli-errori-per-la-gestione-dell-istanza-di-wallet" title="Link to this heading">¶</a></h3>
<p>Per garantire robustezza e sicurezza, il Fornitore di Wallet DEVE gestire gli errori in modo coerente in tutte le richieste di Gestione dell'Istanza di Wallet, incluse Registrazione, Recupero e Revoca.</p>
<p>In caso di errore, il Fornitore di Wallet DEVE restituire una risposta di errore come definito in <span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7231.html"><strong>RFC 7231</strong></a>, con ulteriori dettagli disponibili in <span class="target" id="index-1"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7807.html"><strong>RFC 7807</strong></a>. La risposta DEVE utilizzare il Content-Type impostato su <code class="docutils literal notranslate"><span class="pre">application/json</span></code> e DEVE includere i seguenti parametri:</p>
<ul class="simple">
<li><p><em>error</em>. Il codice di errore.</p></li>
<li><p><em>error_description</em>. Testo in forma leggibile dall'uomo che fornisce ulteriori dettagli per chiarire la natura dell'errore riscontrato.</p></li>
</ul>
<p>Le seguenti sezioni classificano gli errori in <strong>errori comuni</strong>, che si applicano a tutte le richieste, ed <strong>errori specifici della richiesta</strong>, che sono rilevanti per operazioni particolari.</p>
</section>
<section id="risposte-di-errore-comuni">
<h3><span class="section-number">8.1.3.8. </span>Risposte di Errore Comuni<a class="headerlink" href="#risposte-di-errore-comuni" title="Link to this heading">¶</a></h3>
<p>I seguenti errori si applicano a tutte le operazioni di Gestione dell'Istanza di Wallet (Registrazione, Recupero e Revoca) e DEVONO essere supportati per la risposta di errore, se non diversamente specificato:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 22.2%" />
<col style="width: 22.2%" />
<col style="width: 55.6%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Codice di Stato HTTP</strong></p></th>
<th class="head"><p><strong>Codice di Errore</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">400</span> <span class="pre">Bad</span> <span class="pre">Request</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bad_request</span></code></p></td>
<td><p>La richiesta è malformata, mancano parametri richiesti o include parametri non validi e sconosciuti.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">422</span> <span class="pre">Unprocessable</span> <span class="pre">Content</span></code> [OPZIONALE]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">validation_error</span></code></p></td>
<td><p>La richiesta non aderisce al formato richiesto.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">500</span> <span class="pre">Internal</span> <span class="pre">Server</span> <span class="pre">Error</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">server_error</span></code></p></td>
<td><p>Si è verificato un errore interno durante l'elaborazione della richiesta.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">503</span> <span class="pre">Service</span> <span class="pre">Unavailable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">temporarily_unavailable</span></code></p></td>
<td><p>Il servizio non è disponibile. Si prega di riprovare più tardi.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="risposte-di-errore-specifiche-della-richiesta">
<h3><span class="section-number">8.1.3.9. </span>Risposte di Errore Specifiche della Richiesta<a class="headerlink" href="#risposte-di-errore-specifiche-della-richiesta" title="Link to this heading">¶</a></h3>
<p>Gli errori in <a class="reference internal" href="mobile-application-instance.html#risposta-di-errore-di-inizializzazione-dell-istanza-dell-applicazione-mobile"><span class="std std-ref">Risposta di Errore di Inizializzazione dell'Istanza dell'Applicazione Mobile</span></a> DEVONO essere supportati per le risposte di errore relative alla <strong>Registrazione dell'Istanza di Wallet</strong>.</p>
<p>I seguenti errori DEVONO essere supportati per le risposte di errore relative al <strong>Recupero dell'Istanza di Wallet</strong>:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 22.2%" />
<col style="width: 22.2%" />
<col style="width: 55.6%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Codice di Stato HTTP</strong></p></th>
<th class="head"><p><strong>Codice di Errore</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">403</span> <span class="pre">Forbidden</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">forbidden</span></code></p></td>
<td><p>L'utente non ha il permesso di recuperare questa Istanza di Wallet.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">401</span> <span class="pre">Unauthorized</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">unauthorized</span></code></p></td>
<td><p>La richiesta manca di Credenziali di autenticazione valide.</p></td>
</tr>
</tbody>
</table>
<p>I seguenti errori DEVONO essere supportati per le risposte di errore relative alla <strong>Revoca dell'Istanza di Wallet</strong>:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 22.2%" />
<col style="width: 22.2%" />
<col style="width: 55.6%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Codice di Stato HTTP</strong></p></th>
<th class="head"><p><strong>Codice di Errore</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">403</span> <span class="pre">Forbidden</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">invalid_request</span></code></p></td>
<td><p>L'utente non ha il permesso di revocare questa Istanza di Wallet.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">401</span> <span class="pre">Unauthorized</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">unauthorized</span></code></p></td>
<td><p>La richiesta non può essere autenticata o autorizzata.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="endpoint-di-emissione-dell-attestato-di-wallet">
<h2><span class="section-number">8.1.4. </span>Endpoint di Emissione dell'Attestato di Wallet<a class="headerlink" href="#endpoint-di-emissione-dell-attestato-di-wallet" title="Link to this heading">¶</a></h2>
<p>Questo è un endpoint API RESTful fornito dal Fornitore di Wallet che consente all'Istanza di Wallet di ottenere un Attestato di Wallet, inviando una Richiesta di Emissione dell'Attestato di Wallet.</p>
<section id="richiesta-di-emissione-dell-attestato-di-wallet">
<h3><span class="section-number">8.1.4.1. </span>Richiesta di Emissione dell'Attestato di Wallet<a class="headerlink" href="#richiesta-di-emissione-dell-attestato-di-wallet" title="Link to this heading">¶</a></h3>
<p>Ulteriori dettagli sulla Richiesta di Emissione dell'Attestato di Wallet sono forniti nella sezione <a class="reference internal" href="mobile-application-instance.html#richiesta-di-associazione-chiave-dell-applicazione-mobile"><span class="std std-ref">Richiesta di Associazione Chiave dell'Applicazione Mobile</span></a>.</p>
<p>L'header <code class="docutils literal notranslate"><span class="pre">typ</span></code> del JWT della Richiesta di Integrità assume il valore <code class="docutils literal notranslate"><span class="pre">wp-war+jwt</span></code>.</p>
</section>
<section id="risposta-all-emissione-dell-attestato-di-wallet">
<h3><span class="section-number">8.1.4.2. </span>Risposta all'Emissione dell'Attestato di Wallet<a class="headerlink" href="#risposta-all-emissione-dell-attestato-di-wallet" title="Link to this heading">¶</a></h3>
<p>Se la Richiesta di Emissione dell'Attestato di Wallet viene convalidata con successo, il Fornitore di Wallet restituisce una risposta HTTP con un codice di stato <code class="docutils literal notranslate"><span class="pre">200</span> <span class="pre">OK</span></code> e Content-Type <code class="docutils literal notranslate"><span class="pre">application/json</span></code>. L'Oggetto JSON restituito DEVE possedere il parametro <code class="docutils literal notranslate"><span class="pre">wallet_attestations</span></code> il cui valore è un array di Oggetti JSON (vedi <a class="reference internal" href="wallet-attestation-issuance.html#emissione-dell-attestato-di-wallet"><span class="std std-ref">Emissione dell'Attestato di Wallet</span></a>) contenente gli Attestati di Wallet in formato JWT, SD-JWT e mdoc firmati dal Fornitore di Wallet. L'Attestato di Wallet in formato JWT deve essere utilizzato per la fase di Emissione, come Attestato Client OAuth, e sarà inviato al Credential Issuer come discusso in <a class="reference internal" href="credential-issuance.html#emissione-di-attestati-elettronici"><span class="std std-ref">Emissione di Attestati Elettronici</span></a>. L'Attestato di Wallet in formato SD-JWT e mdoc sarà invece utilizzato durante la presentazione rispettivamente nei flussi remoto (<a class="reference internal" href="remote-flow.html#flusso-remoto"><span class="std std-ref">Flusso Remoto</span></a>) e di prossimità (<a class="reference internal" href="proximity-flow.html#flusso-di-prossimita"><span class="std std-ref">Flusso di Prossimità</span></a>).</p>
<p>L'Oggetto JSON restituito nella risposta ha il seguente claim:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Parametro</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>wallet_attestations</strong></p></td>
<td><p>OBBLIGATORIO. Contiene un array di uno o più Attestati di Wallet emessi. Gli elementi dell'array DEVONO essere Oggetti JSON. Devono essere presenti almeno due Oggetti JSON.</p></td>
<td><p>Questa specifica.</p></td>
</tr>
</tbody>
</table>
<p>Ogni Oggetto JSON contenuto nell'array <code class="docutils literal notranslate"><span class="pre">wallet_attestations</span></code> DEVE avere la seguente forma:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Parametro</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>format</strong></p></td>
<td><p>Una stringa che identifica il Modello di Dati utilizzato per creare e rappresentare l'Attestato di Wallet. DEVE essere <code class="docutils literal notranslate"><span class="pre">jwt</span></code>, <code class="docutils literal notranslate"><span class="pre">dc+sd-jwt</span></code> o <code class="docutils literal notranslate"><span class="pre">mso_mdoc</span></code> a seconda del formato della Credenziale.</p></td>
<td><p>Questa specifica.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>wallet_attestation</strong></p></td>
<td><p>Una stringa che rappresenta l'Attestato di Wallet. Se</p>
<ul class="simple">
<li><p>l'Attestato di Wallet è in formato JWT, allora il valore del claim DEVE essere una stringa che è un JWT.</p></li>
<li><p>l'Attestato di Wallet è in formato SD-JWT, allora il valore del claim DEVE essere una stringa che è un SD-JWT VC.</p></li>
<li><p>l'Attestato di Wallet è in formato mdoc, allora il valore del claim è la rappresentazione codificata in base64url della struttura IssuerSigned codificata in CBOR, come definito in [ISO.18013-5]. Questa struttura DEVE contenere tutti i Namespace e gli IssuerSignedItems inclusi nel MobileSecurityObject.</p></li>
</ul>
</td>
<td><p>Questa specifica.</p></td>
</tr>
</tbody>
</table>
<p>Se si verificano errori durante il processo, viene restituita una risposta di errore. Ulteriori dettagli sulla risposta di errore sono forniti nella sezione <a class="reference internal" href="mobile-application-instance.html#risposta-di-errore-di-associazione-chiave-dell-applicazione-mobile"><span class="std std-ref">Risposta di Errore di Associazione Chiave dell'Applicazione Mobile</span></a>.</p>
</section>
<section id="jwt-dell-attestato-di-wallet">
<h3><span class="section-number">8.1.4.3. </span>JWT dell'Attestato di Wallet<a class="headerlink" href="#jwt-dell-attestato-di-wallet" title="Link to this heading">¶</a></h3>
<p>L'header JOSE del JWT dell'Attestato di Wallet contiene i seguenti parametri:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Header JOSE</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>alg</strong></p></td>
<td><p>OBBLIGATORIO. Un identificatore di algoritmo di firma digitale come da registro IANA &quot;JSON Web Signature and Encryption Algorithms&quot;. DEVE essere uno degli algoritmi supportati elencati nella Sezione <a class="reference internal" href="algorithms.html#algoritmi-crittografici"><span class="std std-ref">Algoritmi Crittografici</span></a> e NON DEVE essere impostato su <code class="docutils literal notranslate"><span class="pre">none</span></code> o qualsiasi identificatore di algoritmo simmetrico (MAC).</p></td>
<td><p><span class="target" id="index-2"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7516.html#section-4.1.1"><strong>RFC 7516#section-4.1.1</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>kid</strong></p></td>
<td><p>OBBLIGATORIO. Identificatore univoco della chiave pubblica associata alla chiave privata che il Fornitore di Wallet ha utilizzato per firmare l'Attestato di Wallet.</p></td>
<td><p><span class="target" id="index-3"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7638.html#section_3"><strong>RFC 7638#section_3</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>typ</strong></p></td>
<td><p>OBBLIGATORIO. DEVE essere impostato su <code class="docutils literal notranslate"><span class="pre">oauth-client-attestation+jwt</span></code></p></td>
<td><p><a class="reference external" href="https://openid.net/specs/openid4vc-high-assurance-interoperability-profile-1_0-01.html">OPENID4VC-HAIP</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>trust_chain</strong></p></td>
<td><p>OBBLIGATORIO. Sequenza di Entity Statement che compone la Catena di Fiducia relativa al Fornitore di Wallet.</p></td>
<td><p><a class="reference external" href="https://openid.net/specs/openid-federation-1_0-41.html">OID-FED</a> Sezione 4.3 <em>Trust Chain Header Parameter</em>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>x5c</strong></p></td>
<td><p>OPZIONALE. Contiene il certificato di chiave pubblica X.509 o la catena di certificati (<span class="target" id="index-4"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc5280.html"><strong>RFC 5280</strong></a>) corrispondente alla chiave utilizzata per firmare digitalmente il JWT.</p></td>
<td><p><span class="target" id="index-5"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a> Sezione 4.1.8 e <a class="reference external" href="https://datatracker.ietf.org/doc/draft-ietf-oauth-sd-jwt-vc/06/">SD-JWT-VC</a> Sezione 3.5.</p></td>
</tr>
</tbody>
</table>
<p>Il corpo del JWT dell'Attestato di Wallet contiene i seguenti claim:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>OBBLIGATORIO. Identificatore del Fornitore di Wallet.</p></td>
<td><p><span class="target" id="index-6"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-7"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>exp</strong></p></td>
<td><p>OBBLIGATORIO. Timestamp UNIX con il tempo di scadenza del JWT.</p></td>
<td><p><span class="target" id="index-8"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-9"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>iat</strong></p></td>
<td><p>OBBLIGATORIO. Timestamp UNIX con il tempo di emissione del JWT.</p></td>
<td><p><span class="target" id="index-10"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-11"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>cnf</strong></p></td>
<td><p>OBBLIGATORIO. Oggetto JSON, contenente la parte pubblica di una coppia di chiavi asimmetriche posseduta dall'Istanza di Wallet.</p></td>
<td><p><span class="target" id="index-12"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7800.html"><strong>RFC 7800</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>wallet_link</strong></p></td>
<td><p>OPZIONALE. Stringa contenente un URL per ottenere ulteriori informazioni sul Wallet e sul Fornitore di Wallet.</p></td>
<td><p><a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>wallet_name</strong></p></td>
<td><p>OPZIONALE. Stringa contenente un nome leggibile dall'uomo del Wallet.</p></td>
<td><p><a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>sub</strong></p></td>
<td><p>OBBLIGATORIO. Identificatore dell'Istanza di Wallet che è l'impronta digitale della JWK dell'Attestato di Wallet.</p></td>
<td><p><span class="target" id="index-13"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-14"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>aal</strong></p></td>
<td><p>OBBLIGATORIO. Stringa JSON che attesta il livello di autenticazione del Wallet e della chiave come affermato nel claim cnf.</p></td>
<td><p>Questa specifica.</p></td>
</tr>
</tbody>
</table>
<p>Di seguito è riportato un esempio non normativo dell'header e del payload dell'Attestato di Wallet SD-JWT senza codifica e firma applicata:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;alg&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ES256&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;kid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5t5YYpBhN-EgIEEI5iUzr6r0MR02LnVQ0OmekmNKcjY&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;trust_chain&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;eyJhbGciOiJFUz...6S0A&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;eyJhbGciOiJFUz...jJLA&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;eyJhbGciOiJFUz...H9gw&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;typ&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;jwt&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;iss&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://wallet-provider.example.org&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;cnf&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;jwk&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;crv&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;P-256&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;kty&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EC&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4HNptI-xr2pjyRJKGMnz4WmdnQD_uJSq4R95Nj98b44&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LIZnSB39vFJhYgS3k7jXE4r3-CoGFQwZtPBIRqpNlrg&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;iat&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1687281195</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;exp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1687288395</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;vct&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;wallet.atestation.example/v1.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;sub&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vbeXJksM45xphtANnCiG6mCyuU4jfGNzopGuKvogg9c&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;aal&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://trust-list.eu/aal/high&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;wallet_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Wallet_v1&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;wallet_link&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://example.com/wallet/detail_info.html&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="sd-jwt-dell-attestato-di-wallet">
<h3><span class="section-number">8.1.4.4. </span>SD-JWT dell'Attestato di Wallet<a class="headerlink" href="#sd-jwt-dell-attestato-di-wallet" title="Link to this heading">¶</a></h3>
<p>L'header JOSE dell'SD-JWT dell'Attestato di Wallet DEVE contenere i seguenti parametri:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Header JOSE</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>alg</strong></p></td>
<td><p>OBBLIGATORIO. Un identificatore di algoritmo di firma digitale come da registro IANA &quot;JSON Web Signature and Encryption Algorithms&quot;. DEVE essere uno degli algoritmi supportati elencati in <a class="reference internal" href="algorithms.html#algoritmi-crittografici"><span class="std std-ref">Algoritmi Crittografici</span></a> e NON DEVE essere impostato su <code class="docutils literal notranslate"><span class="pre">none</span></code> o qualsiasi identificatore di algoritmo simmetrico (MAC).</p></td>
<td><p><span class="target" id="index-15"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7516.html#section-4.1.1"><strong>RFC 7516#section-4.1.1</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>kid</strong></p></td>
<td><p>OBBLIGATORIO. Identificatore univoco della chiave pubblica associata alla chiave privata che il Fornitore di Wallet ha utilizzato per firmare l'Attestato di Wallet.</p></td>
<td><p><span class="target" id="index-16"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7638.html#section_3"><strong>RFC 7638#section_3</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>typ</strong></p></td>
<td><p>OBBLIGATORIO. DEVE essere impostato su <code class="docutils literal notranslate"><span class="pre">dc+sd-jwt</span></code></p></td>
<td><p><a class="reference external" href="https://openid.net/specs/openid4vc-high-assurance-interoperability-profile-1_0-01.html">OPENID4VC-HAIP</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>trust_chain</strong></p></td>
<td><p>OBBLIGATORIO. Sequenza di Entity Statement che compone la Catena di Fiducia relativa al Fornitore di Wallet.</p></td>
<td><p><a class="reference external" href="https://openid.net/specs/openid-federation-1_0-41.html">OID-FED</a> Sezione 4.3 <em>Trust Chain Header Parameter</em>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>x5c</strong></p></td>
<td><p>OPZIONALE. Contiene il certificato di chiave pubblica X.509 o la catena di certificati (<span class="target" id="index-17"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc5280.html"><strong>RFC 5280</strong></a>) corrispondente alla chiave utilizzata per firmare digitalmente il JWT.</p></td>
<td><p><span class="target" id="index-18"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7515.html"><strong>RFC 7515</strong></a> Sezione 4.1.8 e <a class="reference external" href="https://datatracker.ietf.org/doc/draft-ietf-oauth-sd-jwt-vc/06/">SD-JWT-VC</a> Sezione 3.5.</p></td>
</tr>
</tbody>
</table>
<p>Il corpo dell'SD-JWT dell'Attestato di Wallet contiene i seguenti claim:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Claim</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>iss</strong></p></td>
<td><p>OBBLIGATORIO. Identificatore del Fornitore di Wallet.</p></td>
<td><p><span class="target" id="index-19"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-20"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>exp</strong></p></td>
<td><p>OBBLIGATORIO. Timestamp UNIX con il tempo di scadenza del JWT.</p></td>
<td><p><span class="target" id="index-21"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-22"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>iat</strong></p></td>
<td><p>OBBLIGATORIO. Timestamp UNIX con il tempo di emissione del JWT.</p></td>
<td><p><span class="target" id="index-23"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-24"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>cnf</strong></p></td>
<td><p>OBBLIGATORIO. Oggetto JSON, contenente la parte pubblica di una coppia di chiavi asimmetriche posseduta dall'Istanza di Wallet.</p></td>
<td><p><span class="target" id="index-25"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7800.html"><strong>RFC 7800</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>vct</strong></p></td>
<td><p>OBBLIGATORIO. Il valore del tipo di Credenziale DEVE essere una Stringa URL HTTPS e DEVE essere impostato su <code class="docutils literal notranslate"><span class="pre">wallet.atestation.example/v1.0</span></code>.</p></td>
<td><p>Sezione 3.2.2.2 <a class="reference external" href="https://datatracker.ietf.org/doc/draft-ietf-oauth-sd-jwt-vc/06/">SD-JWT-VC</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>_sd</strong></p></td>
<td><p>OBBLIGATORIO. Array JSON contenente un elenco di tutti i digest delle divulgazioni.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/html/draft-ietf-oauth-selective-disclosure-jwt-14">SD-JWT</a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>_sd_alg</strong></p></td>
<td><p>OBBLIGATORIO. Stringa contenente l'algoritmo di hash utilizzato dal Fornitore di Wallet per generare i digest delle divulgazioni.</p></td>
<td><p><a class="reference external" href="https://datatracker.ietf.org/doc/html/draft-ietf-oauth-selective-disclosure-jwt-14">SD-JWT</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>sub</strong></p></td>
<td><p>OBBLIGATORIO. Identificatore dell'Istanza di Wallet che è l'impronta digitale della JWK dell'Attestato di Wallet.</p></td>
<td><p><span class="target" id="index-26"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-27"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>aal</strong></p></td>
<td><p>OBBLIGATORIO. Stringa JSON che attesta il livello di autenticazione del Wallet e della chiave come affermato nel claim cnf.</p></td>
<td><p>Questa specifica.</p></td>
</tr>
</tbody>
</table>
<p>Le seguenti divulgazioni POSSONO essere presenti:</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Divulgazione</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>wallet_link</strong></p></td>
<td><p>OPZIONALE. Stringa contenente un URL per ottenere ulteriori informazioni sul Wallet e sul Fornitore di Wallet.</p></td>
<td><p><a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>wallet_name</strong></p></td>
<td><p>OPZIONALE. Stringa contenente un nome leggibile dall'uomo del Wallet.</p></td>
<td><p><a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>.</p></td>
</tr>
</tbody>
</table>
<p>Di seguito sono descritti esempi di valori per le divulgazioni:</p>
<p><strong>Claim</strong> <code class="docutils literal notranslate"><span class="pre">wallet_link</span></code>:</p>
<ul class="simple">
<li><p>Hash SHA-256: <code class="docutils literal notranslate"><span class="pre">cD9/XC7t7QVHvmSiE1dGW0WYr0jcqm8n0GA6MGitaik=</span></code></p></li>
<li><p>Divulgazione: <code class="docutils literal notranslate"><span class="pre">WyIyR0xDNDJzS1F2ZUNmR2ZyeU5STjl3IiwgIndhbGxldF9saW5rIiwgImh0dHBzOi8vZXhhbXBsZS5jb20vd2FsbGV0L2RldGFpbF9pbmZvLmh0bWwiXQ==</span></code></p></li>
<li><p>Contenuti: <code class="docutils literal notranslate"><span class="pre">[&quot;2GLC42sKQveCfGfryNRN9w&quot;,</span> <span class="pre">&quot;wallet_link&quot;,</span> <span class="pre">&quot;https://example.com/wallet/detail_info.html&quot;]</span></code></p></li>
</ul>
<p><strong>Claim</strong> <code class="docutils literal notranslate"><span class="pre">wallet_name</span></code>:</p>
<ul class="simple">
<li><p>Hash SHA-256: <code class="docutils literal notranslate"><span class="pre">iQQhzf6+saYCzHH92N1QyJisKsZbApbTrJ1amHgLoOk=</span></code></p></li>
<li><p>Divulgazione:n``WyIyR0xDNDJzS1F2ZUNmR2ZyeU5STjl3IiwgIndhbGxldF9uYW1lIiwgIldhbGxldF9Ib2JiaXRvbl92MSJd``</p></li>
<li><p>Contenuti: <code class="docutils literal notranslate"><span class="pre">[&quot;2GLC42sKQveCfGfryNRN9w&quot;,</span> <span class="pre">&quot;wallet_name&quot;,</span> <span class="pre">&quot;Wallet_v1&quot;]</span></code></p></li>
</ul>
<p>Di seguito è riportato un esempio non normativo dell'header e del payload dell'Attestato di Wallet SD-JWT senza codifica e firma applicata:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;alg&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ES256&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;kid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5t5YYpBhN-EgIEEI5iUzr6r0MR02LnVQ0OmekmNKcjY&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;trust_chain&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;eyJhbGciOiJFUz...6S0A&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;eyJhbGciOiJFUz...jJLA&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;eyJhbGciOiJFUz...H9gw&quot;</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;typ&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dc+sd-jwt&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;iss&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://wallet-provider.example.org&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;cnf&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;jwk&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;crv&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;P-256&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;kty&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EC&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4HNptI-xr2pjyRJKGMnz4WmdnQD_uJSq4R95Nj98b44&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LIZnSB39vFJhYgS3k7jXE4r3-CoGFQwZtPBIRqpNlrg&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;_sd&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;cD9/XC7t7QVHvmSiE1dGW0WYr0jcqm8n0GA6MGitaik=&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;iQQhzf6+saYCzHH92N1QyJisKsZbApbTrJ1amHgLoOk=&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;_sd_alg&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sha-256&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;iat&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1687281195</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;exp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1687288395</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;vct&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://wallet.attestation.example/v1.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;sub&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vbeXJksM45xphtANnCiG6mCyuU4jfGNzopGuKvogg9c&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;aal&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://trust-framework.example.it/aal/high&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="attestato-di-wallet-mdoc">
<h3><span class="section-number">8.1.4.5. </span>Attestato di Wallet mdoc<a class="headerlink" href="#attestato-di-wallet-mdoc" title="Link to this heading">¶</a></h3>
<p>Questa descrizione specializza ulteriormente le linee guida fornite in ref:<cite>pid-eaa-data-model:MDOC-CBOR Credential Format</cite> per rappresentare l'Attestato di Wallet in formato mdoc. Quest'ultimo DEVE:</p>
<ul class="simple">
<li><p>Avere il namespace domestico <code class="docutils literal notranslate"><span class="pre">org.iso.18013.5.1.it</span></code>;</p></li>
<li><p>Avere <strong>docType</strong> impostato su <code class="docutils literal notranslate"><span class="pre">org.iso.18013.5.1.it.WalletAttestation</span></code>; e</p></li>
<li><p>Avere <strong>issuerAuth</strong> come descritto in <a class="reference internal" href="credential-data-model.html#mobile-security-object"><span class="std std-ref">Mobile Security Object</span></a>.</p></li>
</ul>
<p>I <code class="docutils literal notranslate"><span class="pre">nameSpaces</span></code> per gli Oggetti Json del nameSpace domestico sono definiti come segue:</p>
<table class="longtable docutils align-default" id="id1">
<caption><span class="caption-number">Tabella 8.1 </span><span class="caption-text">org.iso.18013.5.1.it</span><a class="headerlink" href="#id1" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>elementIdentifier</strong></p></th>
<th class="head"><p><strong>Descrizione</strong></p></th>
<th class="head"><p><strong>Riferimento</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>sub</strong></p></td>
<td><p>OBBLIGATORIO. Identificatore dell'Istanza di Wallet che è l'impronta digitale della Chiave COSE dell'Attestato di Wallet.</p></td>
<td><p><span class="target" id="index-28"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9126.html"><strong>RFC 9126</strong></a> e <span class="target" id="index-29"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc7519.html"><strong>RFC 7519</strong></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>aal</strong></p></td>
<td><p>Stringa JSON che attesta il livello di autenticazione dell'Istanza di Wallet in relazione alla Chiave COSE contenuta nel claim <code class="docutils literal notranslate"><span class="pre">IssuerAuth.deviceKeyInfo.deviceKey</span></code> dell'Oggetto <strong>issuerAuth</strong>.</p></td>
<td><p><span class="target" id="index-30"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc9679.html"><strong>RFC 9679</strong></a>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>wallet_link</strong></p></td>
<td><p>Stringa JSON contenente un URL per ottenere ulteriori informazioni sul Wallet e sul Fornitore di Wallet.</p></td>
<td><p><a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>wallet_name</strong></p></td>
<td><p>Stringa JSON, DEVE essere l'Identificatore del Fornitore di Wallet.</p></td>
<td><p><a class="reference external" href="https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0-15.html">OpenID4VCI</a>.</p></td>
</tr>
</tbody>
</table>
<p>Di seguito è riportato un esempio non normativo dell'Attestato di Wallet mdoc in notazione diagnostica CBOR:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;docType&quot;: &quot;org.iso.18013.5.1.it.WalletAttestation&quot;,
  &quot;issuerSigned&quot;:{
    &quot;nameSpaces&quot;:{
      &quot;org.iso.18013.5.1.it&quot;:[
        24(&lt;&lt; {
        &quot;digestID&quot;: 0,
        &quot;random&quot;: h&#39;960CB15A…E902807AA95&#39;,
        &quot;elementIdentifier&quot;: &quot;wallet_name&quot;,
        &quot;elementValue&quot;: &quot;Wallet_v1&quot;
        } &gt;&gt;),
        24(&lt;&lt;
        {
        &quot;digestID&quot;: 1,
        &quot;random&quot;: h&#39;9D3774BD59…A4F76A&#39;,
        &quot;elementIdentifier&quot;: &quot;wallet_link&quot;,
        &quot;elementValue&quot;:&quot;https://example.com/wallet/detail_info.html&quot;
        } &gt;&gt;),
        24(&lt;&lt; {
        &quot;digestID&quot;: 2,
        &quot;random&quot;: h&#39;AE84834F3…A3E4FCCE&#39;,
        &quot;elementIdentifier&quot;: &quot;sub&quot;,
        &quot;elementValue&quot;:&quot;vbeXJksM45xphtANnCiG6mCyuU4jfGNzopGuKvogg9c&quot;
        } &gt;&gt;),
        24(&lt;&lt;
        {
        &quot;digestID&quot;: 3,
        &quot;random&quot;: h&#39;9D3774BD59…A4F76A&#39;,
        &quot;elementIdentifier&quot;: &quot;aal&quot;,
        &quot;elementValue&quot;:&quot;https://trust-list.eu/aal/high&quot;
        } &gt;&gt;)
      ]
},
  &quot;issuerAuth&quot;: [
    &lt;&lt; {1: -7} &gt;&gt;,
    {
    33: h&#39;30820215308201BCA003020102021404AD30C…&#39;
    },
    &lt;&lt;
      24(&lt;&lt;
        {
          &quot;docType&quot;:&quot;org.iso.18013.5.1.it.WalletAttestation&quot;,
          &quot;version&quot;: &quot;org.iso.18013.5.1.it&quot;,
          &quot;validityInfo&quot;: {
            &quot;signed&quot;: &quot;2023-02-22T06:23:56Z&quot;
            &quot;validFrom&quot;: &quot;2023-02-22T06:23:56Z&quot;,
            &quot;validUntil&quot;: &quot;2024-02-22T00:00:00Z&quot;
          },
          &quot;valueDigests&quot;: {
            &quot;org.iso.18013.5.1.it&quot;: {
              0: h&#39;0F1571A988FCDF2929…&#39;,
              1: h&#39;0CDFE0774A2B596C90…&#39;,
              2: h&#39;E23821492558984395…&#39;,
              3: h&#39;BBC77E6CCE544EDF86…&#39;
            }
          },
          &quot;deviceKeyInfo&quot;: {
            &quot;deviceKey&quot;: {
              1: 2,
              -1: 1,
              -2: h&#39;B820963964E5…&#39;,
              -3: h&#39;0A6DA0AF437E…&#39;
            }
          },
          &quot;digestAlgorithm&quot;: &quot;SHA-256&quot;
        }
      &gt;&gt;)
    &gt;&gt;,
    h&#39;1AD0D6A7313EFDC…43DEBF48BF5A580D&#39;
  ]
}
</pre></div>
</div>
</section>
</section>
<section id="catalogo-e-service-pdnd-del-fornitore-di-wallet">
<h2><span class="section-number">8.1.5. </span>Catalogo e-Service PDND del Fornitore di Wallet<a class="headerlink" href="#catalogo-e-service-pdnd-del-fornitore-di-wallet" title="Link to this heading">¶</a></h2>
<p>La morte dell'Utente porta alla revoca delle Istanze di Wallet dell'Utente e all'eliminazione dell'account dell'Utente presso il Fornitore di Wallet. Per questo motivo, il Fornitore di Wallet fornisce il seguente e-service tramite PDND.
Un Fornitore di Attestati Elettronici di Dati di Identificazione Personale che è stato notificato dalla Fonte Autentica del PID della morte dell'Utente DEVE inviare una notifica ai Fornitori di Wallet utilizzando questo endpoint.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Una Specifica OpenAPI completa è disponibile <span class="raw-html"><a href="OAS3-PDND-WP.html" target="_blank">qui</a></span>.</p>
</div>
<section id="notifica-morte-utente">
<h3><span class="section-number">8.1.5.1. </span>Notifica Morte Utente<a class="headerlink" href="#notifica-morte-utente" title="Link to this heading">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><strong>Descrizione</strong></p></th>
<td><p>Questo servizio viene utilizzato per notificare al Fornitore di Wallet la necessità di revocare l'Istanza di Wallet ed eliminare l'account dell'Utente a causa della morte dell'Utente.</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><strong>Fornitore</strong></p></th>
<td><p>Fornitore di Wallet</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><strong>Consumatore</strong></p></th>
<td><p>Fornitore di Attestati Elettronici di Dati di Identificazione Personale</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
    
        <div id="show_right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&lt;</span><span>Page contents</span></a></p>
        </div>

        <div id="right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">&gt;</span><span>Page contents:</span></a></p>
            <div class="page_toc">
                <ul>
<li><a class="reference internal" href="#">8.1. Endpoint del Fornitore di Wallet</a><ul>
<li><a class="reference internal" href="#endpoint-di-federazione">8.1.1. Endpoint di Federazione</a></li>
<li><a class="reference internal" href="#endpoint-nonce-della-soluzione-wallet">8.1.2. Endpoint Nonce della Soluzione Wallet</a></li>
<li><a class="reference internal" href="#endpoint-di-gestione-dell-istanza-di-wallet">8.1.3. Endpoint di Gestione dell'Istanza di Wallet</a><ul>
<li><a class="reference internal" href="#richiesta-di-registrazione-dell-istanza-di-wallet">8.1.3.1. Richiesta di Registrazione dell'Istanza di Wallet</a></li>
<li><a class="reference internal" href="#risposta-alla-registrazione-dell-istanza-di-wallet">8.1.3.2. Risposta alla Registrazione dell'Istanza di Wallet</a></li>
<li><a class="reference internal" href="#richiesta-di-recupero-dell-istanza-di-wallet">8.1.3.3. Richiesta di Recupero dell'Istanza di Wallet</a></li>
<li><a class="reference internal" href="#risposta-al-recupero-dell-istanza-di-wallet">8.1.3.4. Risposta al Recupero dell'Istanza di Wallet</a></li>
<li><a class="reference internal" href="#richiesta-di-revoca-dell-istanza-di-wallet">8.1.3.5. Richiesta di Revoca dell'Istanza di Wallet</a></li>
<li><a class="reference internal" href="#risposta-alla-revoca-dell-istanza-di-wallet">8.1.3.6. Risposta alla Revoca dell'Istanza di Wallet</a></li>
<li><a class="reference internal" href="#gestione-degli-errori-per-la-gestione-dell-istanza-di-wallet">8.1.3.7. Gestione degli Errori per la Gestione dell'Istanza di Wallet</a></li>
<li><a class="reference internal" href="#risposte-di-errore-comuni">8.1.3.8. Risposte di Errore Comuni</a></li>
<li><a class="reference internal" href="#risposte-di-errore-specifiche-della-richiesta">8.1.3.9. Risposte di Errore Specifiche della Richiesta</a></li>
</ul>
</li>
<li><a class="reference internal" href="#endpoint-di-emissione-dell-attestato-di-wallet">8.1.4. Endpoint di Emissione dell'Attestato di Wallet</a><ul>
<li><a class="reference internal" href="#richiesta-di-emissione-dell-attestato-di-wallet">8.1.4.1. Richiesta di Emissione dell'Attestato di Wallet</a></li>
<li><a class="reference internal" href="#risposta-all-emissione-dell-attestato-di-wallet">8.1.4.2. Risposta all'Emissione dell'Attestato di Wallet</a></li>
<li><a class="reference internal" href="#jwt-dell-attestato-di-wallet">8.1.4.3. JWT dell'Attestato di Wallet</a></li>
<li><a class="reference internal" href="#sd-jwt-dell-attestato-di-wallet">8.1.4.4. SD-JWT dell'Attestato di Wallet</a></li>
<li><a class="reference internal" href="#attestato-di-wallet-mdoc">8.1.4.5. Attestato di Wallet mdoc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#catalogo-e-service-pdnd-del-fornitore-di-wallet">8.1.5. Catalogo e-Service PDND del Fornitore di Wallet</a><ul>
<li><a class="reference internal" href="#notifica-morte-utente">8.1.5.1. Notifica Morte Utente</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
        </div>
    

      <div class="clearer"></div>
    </div>
    <div class="button_nav_wrapper">
        <div class="button_nav">
            <div class="left">
                
                <a href="endpoints.html">
                    <span class="icon">&lt;</span><span><span class="section-number">8. </span>Endpoints</span></a>
                
            </div>

            <div class="right">
                
                    <a href="credential-issuer-endpoint.html"><span><span class="section-number">8.2. </span>Endpoint del Credential Issuer</span><span class="icon">&gt;</span></a>
                
            </div>
        </div>
    </div>


    <div class="footer" role="contentinfo">
      Ultimo aggiornamento 30/05/2025.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.5.
    </div>

<p id="theme_credit"></p>
  </body>
</html>